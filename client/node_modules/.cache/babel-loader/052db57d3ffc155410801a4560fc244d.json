{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\src\\\\Lema.js\";\nimport \"./css/Lema.css\";\nimport { Component } from \"react\";\nimport { Banner } from \"./components/Banner\";\nimport { LeftBar } from \"./components/LeftBar\";\nimport { Map } from \"./components/Map\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Lema extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeModal: null,\n      // Either null or a React component\n      activeContextMenu: null,\n      // Either null or a React component\n      mapRef: null,\n      collections: [\n      /*{\n      \ttype: \"journey\",\n      \theader: {word: \"horse\", language: \"English (GB)\"},\n      \tchildNodes: [\n      \t\t{word: \"kers\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"krsos\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"hrussa\", language: \"Proto-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"hross\", language: \"Proto-West-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"horse\", language: \"English (GB)\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}}\n      \t]\n      },*/\n\n      /*{\n      \ttype: \"journey\",\n      \theader: {word: \"Pferd\", language: \"German\"},\n      \tchildNodes: [\n      \t\t{word: \"upo\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"uɸorēdos\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"werēdos\", language: \"Gaulish\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"veredus\", language: \"Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"paraveredus\", language: \"Late Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"pfarifrit\", language: \"Old High German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n      \t\t{word: \"Pferd\", language: \"German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}}\n      \t]\n      },*/\n\n      /*{   /!* One word, all cognates (same ancestor). TODO: Legend should detail the ancestors *!/\n      \ttype: \"cognate\",\n      \theader: {word: \"palfrey\", language: \"English (GB)\"},\n      \tchildNodes: [\n      \t\t{word: \"palfrey\", language: \"English (GB)\", colour: \"#f5b60d\"},\n      \t\t{word: \"paard\", language: \"Dutch\", colour: \"#f5b60d\"},\n      \t\t{word: \"Pferd\", language: \"German\", colour: \"#f5b60d\"},\n      \t\t{word: \"Päerd\", language: \"Luxembourgish\", colour: \"#f5b60d\"},\n      \t\t{word: \"פערד\", language: \"Yiddish\", colour: \"#f5b60d\"}\n      \t]\n      },*/\n      // TODO: Multiple cognate collections at once (separate layers/patterned colours)\n      {\n        /* Multiple words, no shared countries. Demonstrates cognates of same English word across different families/languages. */\n        type: \"cognate\",\n        header: {\n          word: \"smith\",\n          language: \"English (GB)\"\n        },\n        childNodes: [{\n          word: \"smith\",\n          language: \"English (GB)\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"smid\",\n          language: \"Dutch\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"Schmidt\",\n          language: \"German\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"smed\",\n          language: \"Danish\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"smed\",\n          language: \"Norwegian\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"smed\",\n          language: \"Swedish\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"smiður\",\n          language: \"Icelandic\",\n          colour: \"#f5b60d\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"forgeron\",\n          language: \"French\",\n          colour: \"#0000ff\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"fabbro\",\n          language: \"Italian\",\n          colour: \"#0000ff\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"Kovář\",\n          language: \"Czech\",\n          colour: \"#ff0000\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"kováč\",\n          language: \"Slovak\",\n          colour: \"#ff0000\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }, {\n          word: \"kowal\",\n          language: \"Polish\",\n          colour: \"#ff0000\",\n          label: {\n            type: \"country\",\n            customText: \"\",\n            fontColour: \"#000000\",\n            fontSize: null,\n            x: null,\n            y: null\n          }\n        }]\n      }],\n      mapRenderCounter: 0\n    };\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.openContextMenu = this.openContextMenu.bind(this);\n    this.closeContextMenu = this.closeContextMenu.bind(this);\n    this.addCollection = this.addCollection.bind(this);\n    this.editCollection = this.editCollection.bind(this);\n    this.addNode = this.addNode.bind(this);\n    this.addNodeDefault = this.addNodeDefault.bind(this);\n    this.editNode = this.editNode.bind(this);\n    this.editNodeColour = this.editNodeColour.bind(this);\n    this.removeNode = this.removeNode.bind(this);\n    this.moveLabel = this.moveLabel.bind(this);\n    this.moveVertex = this.moveVertex.bind(this);\n    this.removeCollection = this.removeCollection.bind(this);\n  }\n\n  openModal(e, modalComponent) {\n    this.setState({\n      activeModal: modalComponent\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      activeModal: null\n    });\n  }\n\n  openContextMenu(e, menuComponent) {\n    this.setState({\n      activeContextMenu: menuComponent\n    });\n  }\n\n  closeContextMenu() {\n    this.setState({\n      activeContextMenu: null\n    });\n  }\n\n  editNodeColour(e, collectionIndex, childNodeIndex, colour) {\n    // Find node and set colour\n    let newCollections = this.state.collections;\n    newCollections[collectionIndex].childNodes[childNodeIndex].colour = colour;\n    this.setState({\n      collections: newCollections,\n      mapRenderCounter: this.state.mapRenderCounter + 1\n    });\n  }\n\n  addNode(e, data) {\n    // Data validation\n    let errorCollector = \"\";\n    if (data.word === null || data.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.language === null || data.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n\n    if (this.state.collections[data.collectionIndex].type === \"cognate\") {\n      // Check for existing language\n      for (let i = 0; i < this.state.collections[data.collectionIndex].childNodes.length; ++i) {\n        let childNode = this.state.collections[data.collectionIndex].childNodes[i];\n\n        if (childNode.language === data.language) {\n          errorCollector += \"A language may only have one word per cognate collection.\\n\" + \"Additional cognate collections may re-use languages in other cognate collections.\";\n          break;\n        }\n      }\n    }\n\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error message with toast\n    else {\n      // Create new child node\n      let newChildNode = {\n        word: data.word,\n        language: data.language\n      };\n      let newCollections = this.state.collections;\n      newCollections[data.collectionIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.collections array)\n\n      this.setState({\n        collections: newCollections\n      }, this.closeModal);\n    }\n  }\n\n  addNodeDefault(e, data) {\n    // Create new child node\n    let newChildNode;\n\n    if (data.type === \"journey\") {\n      newChildNode = {\n        word: \"word\",\n        language: \"language\",\n        colour: \"#000000\",\n        vertex: {\n          type: \"word\",\n          strokeColour: \"#000000\",\n          fillColour: \"#FFFFFF\",\n          radius: null,\n          x: null,\n          y: null,\n          edgeStart: \"centre\",\n          edgeEnd: \"centre\"\n        }\n      };\n    } else if (data.type === \"cognate\") {\n      newChildNode = {\n        word: \"word\",\n        language: \"language\",\n        colour: \"#000000\",\n        label: {\n          type: \"language\",\n          customText: \"\",\n          fontColour: \"#000000\",\n          fontSize: null,\n          x: null,\n          y: null\n        }\n      };\n    }\n\n    let newCollections = this.state.collections;\n    newCollections[data.collectionIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.collections array)\n\n    this.setState({\n      collections: newCollections\n    }, this.closeModal);\n  }\n\n  editNode(e, data) {\n    console.log(e);\n    console.log(data); // Data validation\n\n    let errorCollector = \"\";\n    if (data.word === null || data.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.language === null || data.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error message with toast\n    else {\n      // Create new child node\n      let newCollections = this.state.collections;\n\n      if (newCollections[data.collectionIndex].type === \"journey\") {\n        newCollections[data.collectionIndex].childNodes[data.childNodeIndex] = {\n          word: data.word,\n          language: data.language,\n          colour: data.colour,\n          vertex: { ...newCollections[data.collectionIndex].childNodes[data.childNodeIndex].vertex //type: data.labelType, customText: data.customText, fontColour: data.fontColour, fontSize: data.fontSize\n\n          }\n        };\n      } else if (newCollections[data.collectionIndex].type === \"cognate\") {\n        newCollections[data.collectionIndex].childNodes[data.childNodeIndex] = {\n          word: data.word,\n          language: data.language,\n          colour: data.colour,\n          label: { ...newCollections[data.collectionIndex].childNodes[data.childNodeIndex].label,\n            type: data.labelType,\n            customText: data.customText,\n            fontColour: data.fontColour,\n            fontSize: data.fontSize\n          }\n        };\n      }\n\n      this.setState({\n        collections: newCollections\n      }, this.closeModal);\n    }\n  }\n\n  removeNode(e, collectionIndex, childNodeIndex) {\n    let newCollections = this.state.collections;\n    newCollections[collectionIndex].childNodes.splice(childNodeIndex, 1);\n    this.setState({\n      collections: newCollections\n    }, function () {\n      console.log(this.state);\n    });\n  }\n\n  moveLabel(collectionIndex, childNodeIndex, x, y) {\n    let fontSize = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    let newCollections = this.state.collections;\n    newCollections[collectionIndex].childNodes[childNodeIndex].label.x = x;\n    newCollections[collectionIndex].childNodes[childNodeIndex].label.y = y;\n    if (fontSize) newCollections[collectionIndex].childNodes[childNodeIndex].label.fontSize = fontSize;\n    this.setState({\n      collections: newCollections\n    }, e => {\n      console.log(this.state.collections[collectionIndex].childNodes[childNodeIndex]);\n    });\n  }\n\n  moveVertex(collectionIndex, childNodeIndex, x, y) {\n    let radius = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    let newCollections = this.state.collections;\n    newCollections[collectionIndex].childNodes[childNodeIndex].vertex.x = x;\n    newCollections[collectionIndex].childNodes[childNodeIndex].vertex.y = y;\n    if (radius) newCollections[collectionIndex].childNodes[childNodeIndex].vertex.radius = radius;\n    this.setState({\n      collections: newCollections\n    }, e => {\n      console.log(this.state.collections[collectionIndex].childNodes[childNodeIndex]);\n    });\n  }\n\n  addCollection(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n    // TODO: For cognates, only one cognate per language should be allowed\n    //  - Future feature: for additional cognate collections, change solid colours to patterns of the specified colours instead (e.g. stripes; checks)\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      let newCollections = this.state.collections;\n      newCollections.push({\n        type: data.type,\n        header: data.header,\n        childNodes: []\n      });\n      this.setState({\n        collections: newCollections\n      }, this.closeModal);\n    }\n  }\n\n  editCollection(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      let newCollections = this.state.collections;\n      newCollections[data.index].type = data.type;\n      newCollections[data.index].header = data.header;\n      this.setState({\n        collections: newCollections,\n        mapRenderCounter: this.state.mapRenderCounter + 1\n      }, this.closeModal);\n    }\n  }\n\n  removeCollection(e, collectionIndex) {\n    let newCollections = this.state.collections;\n    newCollections.splice(collectionIndex, 1);\n    this.setState({\n      collections: newCollections\n    }, function () {\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    let modalContainer = null,\n        contextMenuContainer = null;\n\n    if (this.state.activeModal !== null) {\n      let activeModal = this.state.activeModal;\n      modalContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-container\",\n        onClick: e => {\n          if (e.nativeEvent.target.className === \"modal-container\") this.closeModal(); // Closes modal if they click off the modal\n        },\n        children: activeModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 21\n      }, this);\n    }\n\n    if (this.state.activeContextMenu !== null) {\n      let activeContextMenu = this.state.activeContextMenu;\n      contextMenuContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-menu-container\",\n        onClick: this.closeContextMenu,\n        children: activeContextMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 5\n      }, this);\n    }\n\n    console.log(this.state.collections);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Lema\",\n      children: [/*#__PURE__*/_jsxDEV(Banner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-view-container\",\n        children: [/*#__PURE__*/_jsxDEV(LeftBar, {\n          collections: this.state.collections,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          addNode: this.addNode,\n          addNodeDefault: this.addNodeDefault,\n          editNode: this.editNode,\n          editNodeColour: this.editNodeColour,\n          removeNode: this.removeNode,\n          addCollection: this.addCollection,\n          editCollection: this.editCollection,\n          removeCollection: this.removeCollection\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Map, {\n          collections: this.state.collections,\n          mapRenderCounter: this.state.mapRenderCounter,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          moveLabel: this.moveLabel,\n          moveVertex: this.moveVertex,\n          addNode: this.addNode,\n          editNode: this.editNode,\n          editNodeColour: this.editNodeColour,\n          removeNode: this.removeNode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 5\n      }, this), modalContainer, contextMenuContainer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Lema;","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/src/Lema.js"],"names":["Component","Banner","LeftBar","Map","Lema","constructor","props","state","activeModal","activeContextMenu","mapRef","collections","type","header","word","language","childNodes","colour","label","customText","fontColour","fontSize","x","y","mapRenderCounter","openModal","bind","closeModal","openContextMenu","closeContextMenu","addCollection","editCollection","addNode","addNodeDefault","editNode","editNodeColour","removeNode","moveLabel","moveVertex","removeCollection","e","modalComponent","setState","menuComponent","collectionIndex","childNodeIndex","newCollections","data","errorCollector","length","i","childNode","alert","newChildNode","push","vertex","strokeColour","fillColour","radius","edgeStart","edgeEnd","console","log","labelType","splice","index","render","modalContainer","contextMenuContainer","nativeEvent","target","className"],"mappings":"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","sourcesContent":["import \"./css/Lema.css\";\nimport {Component} from \"react\";\nimport {Banner} from \"./components/Banner\";\nimport {LeftBar} from \"./components/LeftBar\";\nimport {Map} from \"./components/Map\";\n\nclass Lema extends Component\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactiveModal: null, // Either null or a React component\n\t\t\tactiveContextMenu: null, // Either null or a React component\n\t\t\tmapRef: null,\n\t\t\tcollections: [\n\n\t\t\t\t/*{\n\t\t\t\t\ttype: \"journey\",\n\t\t\t\t\theader: {word: \"horse\", language: \"English (GB)\"},\n\t\t\t\t\tchildNodes: [\n\t\t\t\t\t\t{word: \"kers\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"krsos\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"hrussa\", language: \"Proto-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"hross\", language: \"Proto-West-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"horse\", language: \"English (GB)\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}}\n\t\t\t\t\t]\n\t\t\t\t},*/\n\t\t\t\t/*{\n\t\t\t\t\ttype: \"journey\",\n\t\t\t\t\theader: {word: \"Pferd\", language: \"German\"},\n\t\t\t\t\tchildNodes: [\n\t\t\t\t\t\t{word: \"upo\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"uɸorēdos\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"werēdos\", language: \"Gaulish\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"veredus\", language: \"Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"paraveredus\", language: \"Late Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"pfarifrit\", language: \"Old High German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"Pferd\", language: \"German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}}\n\t\t\t\t\t]\n\t\t\t\t},*/\n\t\t\t\t/*{   /!* One word, all cognates (same ancestor). TODO: Legend should detail the ancestors *!/\n\t\t\t\t\ttype: \"cognate\",\n\t\t\t\t\theader: {word: \"palfrey\", language: \"English (GB)\"},\n\t\t\t\t\tchildNodes: [\n\t\t\t\t\t\t{word: \"palfrey\", language: \"English (GB)\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"paard\", language: \"Dutch\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"Pferd\", language: \"German\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"Päerd\", language: \"Luxembourgish\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"פערד\", language: \"Yiddish\", colour: \"#f5b60d\"}\n\t\t\t\t\t]\n\t\t\t\t},*/\n\t\t\t\t\t// TODO: Multiple cognate collections at once (separate layers/patterned colours)\n\t\t\t\t{   /* Multiple words, no shared countries. Demonstrates cognates of same English word across different families/languages. */\n\t\t\t\t\ttype: \"cognate\",\n\t\t\t\t\theader: {word: \"smith\", language: \"English (GB)\"},\n\t\t\t\t\tchildNodes: [\n\t\t\t\t\t\t{word: \"smith\", language: \"English (GB)\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smid\", language: \"Dutch\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"Schmidt\", language: \"German\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smed\", language: \"Danish\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smed\", language: \"Norwegian\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smed\", language: \"Swedish\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smiður\", language: \"Icelandic\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"forgeron\", language: \"French\", colour: \"#0000ff\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"fabbro\", language: \"Italian\", colour: \"#0000ff\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"Kovář\", language: \"Czech\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"kováč\", language: \"Slovak\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"kowal\", language: \"Polish\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\tmapRenderCounter: 0\n\t\t};\n\n\t\tthis.openModal = this.openModal.bind(this);\n\t\tthis.closeModal = this.closeModal.bind(this);\n\t\tthis.openContextMenu = this.openContextMenu.bind(this);\n\t\tthis.closeContextMenu = this.closeContextMenu.bind(this);\n\t\tthis.addCollection = this.addCollection.bind(this);\n\t\tthis.editCollection = this.editCollection.bind(this);\n\t\tthis.addNode = this.addNode.bind(this);\n\t\tthis.addNodeDefault = this.addNodeDefault.bind(this);\n\t\tthis.editNode = this.editNode.bind(this);\n\t\tthis.editNodeColour = this.editNodeColour.bind(this);\n\t\tthis.removeNode = this.removeNode.bind(this);\n\t\tthis.moveLabel = this.moveLabel.bind(this);\n\t\tthis.moveVertex = this.moveVertex.bind(this);\n\t\tthis.removeCollection = this.removeCollection.bind(this);\n\t}\n\n\topenModal(e, modalComponent)\n\t{\n\t\tthis.setState({\n\t\t\tactiveModal: modalComponent\n\t\t});\n\t}\n\tcloseModal()\n\t{\n\t\tthis.setState({\n\t\t\tactiveModal: null\n\t\t});\n\t}\n\topenContextMenu(e, menuComponent)\n\t{\n\t\tthis.setState({\n\t\t\tactiveContextMenu: menuComponent\n\t\t});\n\t}\n\tcloseContextMenu()\n\t{\n\t\tthis.setState({\n\t\t\tactiveContextMenu: null\n\t\t});\n\t}\n\n\teditNodeColour(e, collectionIndex, childNodeIndex, colour)\n\t{\n\t\t// Find node and set colour\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].colour = colour;\n\t\tthis.setState({collections: newCollections, mapRenderCounter: this.state.mapRenderCounter+1});\n\t}\n\taddNode(e, data)\n\t{\n\t\t// Data validation\n\t\tlet errorCollector = \"\";\n\t\tif(data.word === null || data.word.length <= 0)\n\t\t\terrorCollector += \"You must enter a word.\\n\";\n\t\tif(data.language === null || data.language.length <= 0)\n\t\t\terrorCollector += \"You must enter a language.\\n\";\n\t\tif(this.state.collections[data.collectionIndex].type === \"cognate\")\n\t\t{\n\t\t\t// Check for existing language\n\t\t\tfor(let i = 0; i < this.state.collections[data.collectionIndex].childNodes.length; ++i)\n\t\t\t{\n\t\t\t\tlet childNode = this.state.collections[data.collectionIndex].childNodes[i];\n\t\t\t\tif(childNode.language === data.language)\n\t\t\t\t{\n\t\t\t\t\terrorCollector += \"A language may only have one word per cognate collection.\\n\" +\n\t\t\t\t\t\t\t\t\t  \"Additional cognate collections may re-use languages in other cognate collections.\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error message with toast\n\t\telse\n\t\t{\n\t\t\t// Create new child node\n\t\t\tlet newChildNode = {word: data.word, language: data.language};\n\t\t\tlet newCollections = this.state.collections;\n\t\t\tnewCollections[data.collectionIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.collections array)\n\n\t\t\tthis.setState({collections: newCollections}, this.closeModal);\n\t\t}\n\t}\n\taddNodeDefault(e, data)\n\t{\n\t\t// Create new child node\n\t\tlet newChildNode;\n\t\tif(data.type === \"journey\")\n\t\t{\n\t\t\tnewChildNode = {word: \"word\", language: \"language\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}};\n\t\t}\n\t\telse if(data.type === \"cognate\")\n\t\t{\n\t\t\tnewChildNode = {word: \"word\", language: \"language\", colour: \"#000000\", label: {type: \"language\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}};\n\t\t}\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections[data.collectionIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.collections array)\n\n\t\tthis.setState({collections: newCollections}, this.closeModal);\n\t}\n\teditNode(e, data)\n\t{\n\t\tconsole.log(e);\n\t\tconsole.log(data);\n\n\t\t// Data validation\n\t\tlet errorCollector = \"\";\n\t\tif(data.word === null || data.word.length <= 0)\n\t\t\terrorCollector += \"You must enter a word.\\n\";\n\t\tif(data.language === null || data.language.length <= 0)\n\t\t\terrorCollector += \"You must enter a language.\\n\";\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error message with toast\n\t\telse\n\t\t{\n\t\t\t// Create new child node\n\t\t\tlet newCollections = this.state.collections;\n\n\t\t\tif(newCollections[data.collectionIndex].type === \"journey\")\n\t\t\t{\n\t\t\t\tnewCollections[data.collectionIndex].childNodes[data.childNodeIndex] = {\n\t\t\t\t\tword: data.word, language: data.language, colour: data.colour,\n\t\t\t\t\tvertex: {\n\t\t\t\t\t\t...newCollections[data.collectionIndex].childNodes[data.childNodeIndex].vertex,\n\t\t\t\t\t\t//type: data.labelType, customText: data.customText, fontColour: data.fontColour, fontSize: data.fontSize\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if(newCollections[data.collectionIndex].type === \"cognate\")\n\t\t\t{\n\t\t\t\tnewCollections[data.collectionIndex].childNodes[data.childNodeIndex] = {\n\t\t\t\t\tword: data.word, language: data.language, colour: data.colour,\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\t...newCollections[data.collectionIndex].childNodes[data.childNodeIndex].label,\n\t\t\t\t\t\ttype: data.labelType, customText: data.customText, fontColour: data.fontColour, fontSize: data.fontSize\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\tthis.setState({collections: newCollections}, this.closeModal);\n\t\t}\n\t}\n\tremoveNode(e, collectionIndex, childNodeIndex)\n\t{\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections[collectionIndex].childNodes.splice(childNodeIndex, 1);\n\t\tthis.setState({collections: newCollections}, function()\n\t\t{\n\t\t\tconsole.log(this.state);\n\t\t});\n\t}\n\tmoveLabel(collectionIndex, childNodeIndex, x, y, fontSize = null)\n\t{\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].label.x = x;\n\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].label.y = y;\n\t\tif(fontSize)\n\t\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].label.fontSize = fontSize;\n\t\tthis.setState({collections: newCollections},\n\t\t\t(e) => {console.log(this.state.collections[collectionIndex].childNodes[childNodeIndex])});\n\t}\n\tmoveVertex(collectionIndex, childNodeIndex, x, y, radius = null)\n\t{\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].vertex.x = x;\n\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].vertex.y = y;\n\t\tif(radius)\n\t\t\tnewCollections[collectionIndex].childNodes[childNodeIndex].vertex.radius = radius;\n\t\tthis.setState({collections: newCollections},\n\t\t\t(e) => {console.log(this.state.collections[collectionIndex].childNodes[childNodeIndex])});\n\t}\n\n\taddCollection(e, data)\n\t{\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\n\n\t\t// Data validation\n\t\t// TODO: For cognates, only one cognate per language should be allowed\n\t\t//  - Future feature: for additional cognate collections, change solid colours to patterns of the specified colours instead (e.g. stripes; checks)\n\t\tlet errorCollector = \"\";\n\t\tif(data.header.word === null || data.header.word.length <= 0)\n\t\t\terrorCollector += \"You must enter a word.\\n\";\n\t\tif(data.header.language === null || data.header.language.length <= 0)\n\t\t\terrorCollector += \"You must enter a language.\\n\";\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\n\t\telse\n\t\t{\n\t\t\tlet newCollections = this.state.collections;\n\t\t\tnewCollections.push({type: data.type, header: data.header, childNodes: []});\n\t\t\tthis.setState( {collections: newCollections}, this.closeModal);\n\t\t}\n\t}\n\teditCollection(e, data)\n\t{\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\n\n\t\t// Data validation\n\t\tlet errorCollector = \"\";\n\t\tif(data.header.word === null || data.header.word.length <= 0)\n\t\t\terrorCollector += \"You must enter a word.\\n\";\n\t\tif(data.header.language === null || data.header.language.length <= 0)\n\t\t\terrorCollector += \"You must enter a language.\\n\";\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\n\t\telse\n\t\t{\n\t\t\tlet newCollections = this.state.collections;\n\t\t\tnewCollections[data.index].type = data.type;\n\t\t\tnewCollections[data.index].header = data.header;\n\t\t\tthis.setState({collections: newCollections, mapRenderCounter: this.state.mapRenderCounter+1}, this.closeModal);\n\t\t}\n\t}\n\tremoveCollection(e, collectionIndex)\n\t{\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections.splice(collectionIndex, 1);\n\t\tthis.setState({collections: newCollections}, function()\n\t\t{\n\t\t\tconsole.log(this.state);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\tlet modalContainer = null, contextMenuContainer = null;\n\t\tif(this.state.activeModal !== null)\n\t\t{\n\t\t\tlet activeModal = this.state.activeModal;\n\t\t\tmodalContainer = <div className={\"modal-container\"} onClick={(e) =>\n\t\t\t{\n\t\t\t\tif(e.nativeEvent.target.className === \"modal-container\") this.closeModal(); // Closes modal if they click off the modal\n\t\t\t}}>{activeModal}</div>;\n\t\t}\n\t\tif(this.state.activeContextMenu !== null)\n\t\t{\n\t\t\tlet activeContextMenu = this.state.activeContextMenu;\n\t\t\tcontextMenuContainer =\n\t\t\t\t<div className={\"context-menu-container\"} onClick={this.closeContextMenu}>{activeContextMenu}</div>;\n\t\t}\n\n\t\tconsole.log(this.state.collections);\n\n\t\treturn (\n\t\t\t<div className=\"Lema\">\n\t\t\t\t<Banner/>\n\t\t\t\t<div className={\"main-view-container\"}>\n\t\t\t\t\t<LeftBar collections={this.state.collections}\n\t\t\t\t\t         openModal={this.openModal} closeModal={this.closeModal}\n\t\t\t\t\t         openContextMenu={this.openContextMenu} closeContextMenu={this.closeContextMenu}\n\t\t\t\t\t         addNode={this.addNode} addNodeDefault={this.addNodeDefault} editNode={this.editNode} editNodeColour={this.editNodeColour} removeNode={this.removeNode}\n\t\t\t\t\t         addCollection={this.addCollection} editCollection={this.editCollection} removeCollection={this.removeCollection}\n\t\t\t\t\t/>\n\t\t\t\t\t<Map collections={this.state.collections} mapRenderCounter={this.state.mapRenderCounter}\n\t\t\t\t\t     openContextMenu={this.openContextMenu} closeContextMenu={this.closeContextMenu}\n\t\t\t\t\t     openModal={this.openModal} closeModal={this.closeModal} moveLabel={this.moveLabel} moveVertex={this.moveVertex}\n\t\t\t\t\t\t addNode={this.addNode} editNode={this.editNode} editNodeColour={this.editNodeColour} removeNode={this.removeNode}  />\n\t\t\t\t</div>\n\t\t\t\t{modalContainer}\n\t\t\t\t{contextMenuContainer}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Lema;\n"]},"metadata":{},"sourceType":"module"}