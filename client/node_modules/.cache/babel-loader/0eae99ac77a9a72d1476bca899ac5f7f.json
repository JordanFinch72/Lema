{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\src\\\\components\\\\Collection.jsx\";\nimport { Component } from \"react\";\nimport { Meatballs } from \"./Meatballs\";\nimport { Collapser } from \"./Collapser\";\nimport { AddEditCollectionModal } from \"./AddEditCollectionModal\";\nimport { AddEditNodeModal } from \"./AddEditNodeModal\";\nimport { Button } from \"./Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CollectionNode extends Component {\n  constructor(props) {\n    super(props);\n    this.openModal = this.props.openModal.bind(this);\n    this.editNodeColour = this.props.editNodeColour.bind(this);\n    this.editNode = this.props.editNode.bind(this);\n    this.removeNode = this.props.removeNode.bind(this);\n  }\n\n  render() {\n    let nodeColour = this.props.node.colour || \"blue\"; // TODO: Advanced logic for determining next unused colour (per journey)\n\n    let changeColourTimeout;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collection-node\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => {\n          this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditNodeModal, {\n            node: this.props.node,\n            language: this.props.node.language,\n            onNodeSubmit: this.props.editNode,\n            collectionIndex: this.props.collectionIndex,\n            wordIndex: this.props.wordIndex\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 24\n          }, this));\n        },\n        children: this.props.node.word\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => {\n          this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditNodeModal, {\n            node: this.props.node,\n            language: this.props.node.language,\n            onNodeSubmit: this.props.editNode,\n            collectionIndex: this.props.collectionIndex,\n            wordIndex: this.props.wordIndex\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 24\n          }, this));\n        },\n        children: this.props.node.language\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"color\",\n          defaultValue: this.props.node.colour,\n          onChange: e => {\n            // Throttle the onChange; there's no way to have it only change when the user clicks off of it, annoyingly\n            let node = this;\n            window.clearTimeout(changeColourTimeout);\n            changeColourTimeout = window.setTimeout(function () {\n              node.editNodeColour(e, node.props.collectionIndex, node.props.wordIndex, e.target.value);\n            }, 100);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          value: \"X\",\n          id: \"remove-node\",\n          onClick: e => this.removeNode(e, this.props.collectionIndex, this.props.wordIndex)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport class Collection extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: false // Note: Could be lifted if we want persistence when editing types\n\n    };\n    this.toggleCollapse = this.toggleCollapse.bind(this);\n    this.openContextMenu = this.props.openContextMenu.bind(this);\n    this.closeContextMenu = this.props.closeContextMenu.bind(this);\n    this.openModal = this.props.openModal.bind(this);\n    this.cAddNode = this.props.cAddNode.bind(this);\n    this.cAddNodeDefault = this.props.cAddNodeDefault.bind(this);\n    this.cRemoveCollection = this.props.cRemoveCollection.bind(this);\n    this.editCollection = this.props.editCollection.bind(this);\n    this.addNode = this.props.addNode.bind(this);\n    this.editNode = this.props.editNode.bind(this);\n    this.editNodeColour = this.props.editNodeColour.bind(this);\n    this.removeNode = this.props.removeNode.bind(this);\n  }\n\n  toggleCollapse(e) {\n    this.setState({\n      collapsed: !this.state.collapsed\n    });\n  }\n\n  getCollectionWords(wordArray, node, i) {\n    if (node.parents) {\n      for (let j = 0; j < node.parents.length; ++j) {\n        wordArray = this.getCollectionWords(wordArray, node.parents[j], j);\n      }\n    } else {\n      wordArray.push( /*#__PURE__*/_jsxDEV(CollectionNode, {\n        type: this.props.type,\n        node: node,\n        editNode: this.editNode,\n        editNodeColour: this.editNodeColour,\n        removeNode: this.removeNode,\n        openModal: this.openModal,\n        collectionIndex: this.props.index // Index of Collection the child node belongs to\n        ,\n        wordIndex: i // Index of word itself within words array\n\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }, this));\n    }\n\n    return wordArray;\n  }\n\n  render() {\n    let childNodeElements = [];\n\n    if (!this.state.collapsed) {\n      let wordArray = [];\n      if (this.props.words.length > 0) wordArray = this.getCollectionWords(wordArray, this.props.words[0], 0);\n      console.log(\"Done?\");\n      console.log(wordArray);\n\n      for (let i = 0; i < this.props.words; ++i) {\n        let index = i,\n            node = this.props.words[i];\n        childNodeElements.push( /*#__PURE__*/_jsxDEV(CollectionNode, {\n          type: this.props.type,\n          node: node,\n          editNode: this.editNode,\n          editNodeColour: this.editNodeColour,\n          removeNode: this.removeNode,\n          openModal: this.openModal,\n          collectionIndex: this.props.index // Index of Collection the child node belongs to\n          ,\n          wordIndex: index // Index of child node itself within words array\n\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 28\n        }, this));\n\n        if (node.parents.length > 0) {}\n      }\n\n      console.log(this.props.words);\n      this.props.words.map((childNode, index) => {\n        childNodeElements.push( /*#__PURE__*/_jsxDEV(CollectionNode, {\n          type: this.props.type,\n          node: childNode,\n          editNode: this.editNode,\n          editNodeColour: this.editNodeColour,\n          removeNode: this.removeNode,\n          openModal: this.openModal,\n          collectionIndex: this.props.index // Index of Collection the child node belongs to\n          ,\n          wordIndex: index // Index of child node itself within words array\n\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 28\n        }, this));\n      });\n    }\n\n    let meatballItems = [{\n      text: \"Add node\",\n      handler: e => {\n        this.cAddNode(e, this.props.index);\n      }\n    }, {\n      text: \"Add node (default)\",\n      handler: e => {\n        this.cAddNodeDefault(e, {\n          type: this.props.type,\n          collectionIndex: this.props.index\n        });\n      }\n    }, {\n      text: \"Remove collection\",\n      handler: e => {\n        this.cRemoveCollection(e, this.props.index);\n      }\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collection-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"collection-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: e => {\n            this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n              type: this.props.type,\n              word: this.props.header.word,\n              language: this.props.header.language,\n              onCollectionSubmit: this.editCollection,\n              index: this.props.index\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 25\n            }, this));\n          },\n          children: this.props.header.word\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: e => {\n            this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n              type: this.props.type,\n              word: this.props.header.word,\n              language: this.props.header.language,\n              onCollectionSubmit: this.editCollection,\n              index: this.props.index\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 25\n            }, this));\n          },\n          children: this.props.header.language\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"meatball-collapser-container\",\n          children: [/*#__PURE__*/_jsxDEV(Meatballs, {\n            openModal: this.openModal,\n            openContextMenu: this.openContextMenu,\n            closeContextMenu: this.closeContextMenu,\n            contextMenuItems: meatballItems\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Collapser, {\n            toggleCollapse: this.toggleCollapse,\n            collapsed: this.state.collapsed\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 5\n      }, this), childNodeElements]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/src/components/Collection.jsx"],"names":["Component","Meatballs","Collapser","AddEditCollectionModal","AddEditNodeModal","Button","CollectionNode","constructor","props","openModal","bind","editNodeColour","editNode","removeNode","render","nodeColour","node","colour","changeColourTimeout","e","language","collectionIndex","wordIndex","word","window","clearTimeout","setTimeout","target","value","Collection","state","collapsed","toggleCollapse","openContextMenu","closeContextMenu","cAddNode","cAddNodeDefault","cRemoveCollection","editCollection","addNode","setState","getCollectionWords","wordArray","i","parents","j","length","push","type","index","childNodeElements","words","console","log","map","childNode","meatballItems","text","handler","header"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\r\nimport {Meatballs} from \"./Meatballs\";\r\nimport {Collapser} from \"./Collapser\";\r\nimport {AddEditCollectionModal} from \"./AddEditCollectionModal\";\r\nimport {AddEditNodeModal} from \"./AddEditNodeModal\";\r\nimport {Button} from \"./Button\";\r\n\r\nclass CollectionNode extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.openModal = this.props.openModal.bind(this);\r\n\t\tthis.editNodeColour = this.props.editNodeColour.bind(this);\r\n\t\tthis.editNode = this.props.editNode.bind(this);\r\n\t\tthis.removeNode = this.props.removeNode.bind(this);\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tlet nodeColour = this.props.node.colour || \"blue\"; // TODO: Advanced logic for determining next unused colour (per journey)\r\n\t\tlet changeColourTimeout;\r\n\r\n\t\treturn (\r\n\t\t\t<div className={\"collection-node\"}>\r\n\t\t\t\t{/* Flex-row */}\r\n\t\t\t\t<div onClick={(e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.openModal(e, <AddEditNodeModal\r\n\t\t\t\t\t\tnode={this.props.node}\r\n\t\t\t\t\t\tlanguage={this.props.node.language}\r\n\t\t\t\t\t\tonNodeSubmit={this.props.editNode}\r\n\t\t\t\t\t\tcollectionIndex={this.props.collectionIndex}\r\n\t\t\t\t\t\twordIndex={this.props.wordIndex}\r\n\t\t\t\t\t/>);\r\n\t\t\t\t}}>{this.props.node.word}</div>\r\n\t\t\t\t<div onClick={(e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.openModal(e, <AddEditNodeModal\r\n\t\t\t\t\t\tnode={this.props.node}\r\n\t\t\t\t\t\tlanguage={this.props.node.language}\r\n\t\t\t\t\t\tonNodeSubmit={this.props.editNode}\r\n\t\t\t\t\t\tcollectionIndex={this.props.collectionIndex}\r\n\t\t\t\t\t\twordIndex={this.props.wordIndex}\r\n\t\t\t\t\t/>);\r\n\t\t\t\t}}>{this.props.node.language}</div>\r\n\t\t\t\t<div className={\"buttons-container\"}>\r\n\t\t\t\t\t<input type={\"color\"} defaultValue={this.props.node.colour} onChange={(e) => {\r\n\t\t\t\t\t\t// Throttle the onChange; there's no way to have it only change when the user clicks off of it, annoyingly\r\n\t\t\t\t\t\tlet node = this;\r\n\t\t\t\t\t\twindow.clearTimeout(changeColourTimeout);\r\n\t\t\t\t\t\tchangeColourTimeout = window.setTimeout(function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnode.editNodeColour(e, node.props.collectionIndex, node.props.wordIndex, e.target.value);\r\n\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t}}/>\r\n\t\t\t\t\t<Button value={\"X\"} id={\"remove-node\"}\r\n\t\t\t\t\t        onClick={(e) => this.removeNode(e, this.props.collectionIndex, this.props.wordIndex)}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class Collection extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcollapsed: false // Note: Could be lifted if we want persistence when editing types\r\n\t\t};\r\n\r\n\t\tthis.toggleCollapse = this.toggleCollapse.bind(this);\r\n\r\n\t\tthis.openContextMenu = this.props.openContextMenu.bind(this);\r\n\t\tthis.closeContextMenu = this.props.closeContextMenu.bind(this);\r\n\t\tthis.openModal = this.props.openModal.bind(this);\r\n\t\tthis.cAddNode = this.props.cAddNode.bind(this);\r\n\t\tthis.cAddNodeDefault = this.props.cAddNodeDefault.bind(this);\r\n\t\tthis.cRemoveCollection = this.props.cRemoveCollection.bind(this);\r\n\t\tthis.editCollection = this.props.editCollection.bind(this);\r\n\t\tthis.addNode = this.props.addNode.bind(this);\r\n\t\tthis.editNode = this.props.editNode.bind(this);\r\n\t\tthis.editNodeColour = this.props.editNodeColour.bind(this);\r\n\t\tthis.removeNode = this.props.removeNode.bind(this);\r\n\t}\r\n\r\n\ttoggleCollapse(e)\r\n\t{\r\n\t\tthis.setState({collapsed: !this.state.collapsed});\r\n\t}\r\n\r\n\tgetCollectionWords(wordArray, node, i)\r\n\t{\r\n\t\tif(node.parents)\r\n\t\t{\r\n\t\t\tfor(let j = 0; j < node.parents.length; ++j)\r\n\t\t\t{\r\n\t\t\t\twordArray = this.getCollectionWords(wordArray, node.parents[j], j);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\twordArray.push(<CollectionNode\r\n\t\t\t\tkey={i}  type={this.props.type} node={node}\r\n\t\t\t\teditNode={this.editNode}\r\n\t\t\t\teditNodeColour={this.editNodeColour}\r\n\t\t\t\tremoveNode={this.removeNode}\r\n\t\t\t\topenModal={this.openModal}\r\n\t\t\t\tcollectionIndex={this.props.index} // Index of Collection the child node belongs to\r\n\t\t\t\twordIndex={i}                      // Index of word itself within words array\r\n\t\t\t/>);\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn wordArray;\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tlet childNodeElements = [];\r\n\r\n\t\tif(!this.state.collapsed)\r\n\t\t{\r\n\t\t\tlet wordArray = [];\r\n\t\t\tif(this.props.words.length > 0)\r\n\t\t\t\twordArray = this.getCollectionWords(wordArray, this.props.words[0], 0);\r\n\r\n\t\t\tconsole.log(\"Done?\");\r\n\t\t\tconsole.log(wordArray);\r\n\r\n\t\t\tfor(let i = 0; i < this.props.words; ++i)\r\n\t\t\t{\r\n\t\t\t\tlet index = i, node = this.props.words[i];\r\n\r\n\t\t\t\tchildNodeElements.push(<CollectionNode\r\n\t\t\t\t\tkey={index}  type={this.props.type} node={node}\r\n\t\t\t\t\teditNode={this.editNode}\r\n\t\t\t\t\teditNodeColour={this.editNodeColour}\r\n\t\t\t\t\tremoveNode={this.removeNode}\r\n\t\t\t\t\topenModal={this.openModal}\r\n\t\t\t\t\tcollectionIndex={this.props.index} // Index of Collection the child node belongs to\r\n\t\t\t\t\twordIndex={index}                  // Index of child node itself within words array\r\n\t\t\t\t/>);\r\n\r\n\t\t\t\tif(node.parents.length > 0)\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tconsole.log(this.props.words);\r\n\t\t\tthis.props.words.map((childNode, index) =>\r\n\t\t\t{\r\n\t\t\t\tchildNodeElements.push(<CollectionNode\r\n\t\t\t\t\tkey={index}  type={this.props.type} node={childNode}\r\n\t\t\t\t\teditNode={this.editNode}\r\n\t\t\t\t\teditNodeColour={this.editNodeColour}\r\n\t\t\t\t\tremoveNode={this.removeNode}\r\n\t\t\t\t\topenModal={this.openModal}\r\n\t\t\t\t\tcollectionIndex={this.props.index} // Index of Collection the child node belongs to\r\n\t\t\t\t\twordIndex={index}                  // Index of child node itself within words array\r\n\t\t\t\t/>);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet meatballItems = [\r\n\t\t\t{\r\n\t\t\t\ttext: \"Add node\", handler: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.cAddNode(e, this.props.index);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Add node (default)\", handler: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.cAddNodeDefault(e, {type: this.props.type, collectionIndex: this.props.index});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Remove collection\", handler: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.cRemoveCollection(e, this.props.index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<div className={\"collection-container\"}>\r\n\t\t\t\t<div className={\"collection-header\"}>\r\n\t\t\t\t\t{/* Flex-row */}\r\n\t\t\t\t\t<div onClick={(e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.openModal(e, <AddEditCollectionModal\r\n\t\t\t\t\t\t\ttype={this.props.type}\r\n\t\t\t\t\t\t\tword={this.props.header.word}\r\n\t\t\t\t\t\t\tlanguage={this.props.header.language}\r\n\t\t\t\t\t\t\tonCollectionSubmit={this.editCollection}\r\n\t\t\t\t\t\t\tindex={this.props.index}\r\n\t\t\t\t\t\t/>);\r\n\t\t\t\t\t}}>{this.props.header.word}</div>\r\n\t\t\t\t\t<div onClick={(e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.openModal(e, <AddEditCollectionModal\r\n\t\t\t\t\t\t\ttype={this.props.type}\r\n\t\t\t\t\t\t\tword={this.props.header.word}\r\n\t\t\t\t\t\t\tlanguage={this.props.header.language}\r\n\t\t\t\t\t\t\tonCollectionSubmit={this.editCollection}\r\n\t\t\t\t\t\t\tindex={this.props.index}\r\n\t\t\t\t\t\t/>);\r\n\t\t\t\t\t}}>{this.props.header.language}</div>\r\n\t\t\t\t\t<div className={\"meatball-collapser-container\"}>\r\n\t\t\t\t\t\t<Meatballs openModal={this.openModal} openContextMenu={this.openContextMenu}\r\n\t\t\t\t\t\t           closeContextMenu={this.closeContextMenu} contextMenuItems={meatballItems}/>\r\n\t\t\t\t\t\t<Collapser toggleCollapse={this.toggleCollapse} collapsed={this.state.collapsed}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{childNodeElements}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}