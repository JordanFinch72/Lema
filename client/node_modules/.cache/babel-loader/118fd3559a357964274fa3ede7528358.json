{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\src\\\\Lema.js\";\nimport \"./css/Lema.css\";\nimport { Component } from \"react\";\nimport { Banner } from \"./components/Banner\";\nimport { LeftBar } from \"./components/LeftBar\";\nimport { Map } from \"./components/Map\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Lema extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeModal: null,\n      // Either null or a React component\n      activeContextMenu: null,\n      // Either null or a React component\n      mapRef: null,\n      collections: [\n        /*{\n        \ttype: \"journey\",\n        \theader: {word: \"horse\", language: \"English (GB)\"},\n        \twords: [\n        \t\t{word: \"kers\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n        \t\t{word: \"krsos\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n        \t\t{word: \"hrussa\", language: \"Proto-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n        \t\t{word: \"hross\", language: \"Proto-West-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n        \t\t{word: \"horse\", language: \"English (GB)\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}}\n        \t]\n        },*/\n\n        /*{   /!* One word, all cognates (same ancestor). TODO: Legend should detail the ancestors *!/\n        \ttype: \"cognate\",\n        \theader: {word: \"palfrey\", language: \"English (GB)\"},\n        \twords: [\n        \t\t{word: \"palfrey\", language: \"English (GB)\", colour: \"#f5b60d\"},\n        \t\t{word: \"paard\", language: \"Dutch\", colour: \"#f5b60d\"},\n        \t\t{word: \"Pferd\", language: \"German\", colour: \"#f5b60d\"},\n        \t\t{word: \"Päerd\", language: \"Luxembourgish\", colour: \"#f5b60d\"},\n        \t\t{word: \"פערד\", language: \"Yiddish\", colour: \"#f5b60d\"}\n        \t]\n        },*/\n        // TODO: Multiple cognate collections at once (separate layers/patterned colours)\n\n        /*{   /!* Multiple words, no shared countries. Demonstrates cognates of same English word across different families/languages. *!/\n        \ttype: \"cognate\",\n        \theader: {word: \"smith\", language: \"English (GB)\"},\n        \twords: [\n        \t\t{word: \"smith\", language: \"English (GB)\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"smid\", language: \"Dutch\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"Schmidt\", language: \"German\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"smed\", language: \"Danish\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"smed\", language: \"Norwegian\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"smed\", language: \"Swedish\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"smiður\", language: \"Icelandic\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"forgeron\", language: \"French\", colour: \"#0000ff\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"fabbro\", language: \"Italian\", colour: \"#0000ff\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"Kovář\", language: \"Czech\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"kováč\", language: \"Slovak\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n        \t\t{word: \"kowal\", language: \"Polish\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}}\n        \t]\n        }*/\n      ],\n      mapRenderCounter: 0\n    };\n    this.flattenTree = this.flattenTree.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.openContextMenu = this.openContextMenu.bind(this);\n    this.closeContextMenu = this.closeContextMenu.bind(this);\n    this.addCollection = this.addCollection.bind(this);\n    this.editCollection = this.editCollection.bind(this);\n    this.addJourney = this.addJourney.bind(this);\n    this.addNode = this.addNode.bind(this);\n    this.editNode = this.editNode.bind(this);\n    this.removeNode = this.removeNode.bind(this);\n    this.removeCollection = this.removeCollection.bind(this);\n  }\n\n  flattenTree(wordArray, edWords, structure, wordID) {\n    let parents = [],\n        wordObject = {}; // Parents\n\n    if (Object.keys(structure).length > 0) {\n      // Loop through parents\n      for (let wordID in structure) {\n        parents.push(wordID);\n        wordArray = this.flattenTree(wordArray, edWords, structure[wordID], wordID);\n      }\n    } // Retrieve word from ED and convert to Lema-compatible object\n\n\n    wordObject = edWords[wordID];\n    wordObject = {\n      id: wordID,\n      arrayIndex: wordArray.length,\n      word: wordObject.word,\n      language: wordObject.language_name,\n      colour: \"#000000\",\n      vertex: {\n        type: \"word\",\n        strokeColour: \"#000000\",\n        fillColour: \"#FFFFFF\",\n        radius: null,\n        fontSize: null,\n        x: null,\n        y: null,\n        edgeStart: \"centre\",\n        edgeEnd: \"centre\"\n      }\n    };\n\n    for (let i = 0; i < parents.length; ++i) {\n      let parent = wordArray.find();\n    }\n\n    wordArray.push(wordObject);\n    return wordArray;\n  }\n\n  addJourney(edWords, edStructure) {\n    let newCollections = this.state.collections; // Flatten the structure\n\n    let journeyWords = [];\n    journeyWords = this.flattenTree(journeyWords, edWords, edStructure, Object.keys(edStructure)[0], null); // Create the new journey and add it to collections\n\n    let newJourney = {\n      type: \"journey\",\n      header: journeyWords[journeyWords.length - 1].word,\n      language: journeyWords[journeyWords.length - 1].language,\n      words: journeyWords\n    };\n    newJourney.words[0].word = \"test\";\n    newCollections.push(newJourney);\n    this.setState({\n      collections: newCollections\n    }, e => {\n      console.log(this.state.collections);\n    });\n  }\n\n  componentDidMount() {\n    /*// TODO: Temporary; same operation will be performed on incoming data from API\n    let testJourney =\n    \t{\n    \t\ttype: \"journey\",\n    \t\theader: {word: \"Pferd\", language: \"German\"},\n    \t\twords: [\n    \t\t\t{id: 1, word: \"Pferd\", language: \"German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t{id: 2, word: \"pfarifrit\", language: \"Old High German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t{id: 4, word: \"paraveredus\", language: \"Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t{id: 6, word: \"veredus\", language: \"Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t\t\t{id: 8, word: \"werēdos\", language: \"Gaulish\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t\t\t\t\t{id: 10, word: \"uɸorēdos\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 12, word: \"uɸo\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 14, word: \"upo\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]},\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 13, word: \"rēdos\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n    \t\t\t\t\t\t\t\t\t\t\t\t]}\n    \t\t\t\t\t\t\t\t\t\t]}\n    \t\t\t\t\t\t\t\t]},\n    \t\t\t\t\t\t\t{id: 5, word: \"paraveredus\", language: \"Late Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t{id: 7, word: \"παρά\", language: \"Ancient Greek\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t\t\t{id: 9, word: \"preh₂-\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n    \t\t\t\t\t\t\t\t\t\t\t\t\t{id: 11, word: \"per-\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n    \t\t\t\t\t\t\t\t\t\t\t\t]}\n    \t\t\t\t\t\t\t\t\t\t]}\n    \t\t\t\t\t\t\t\t]}\n    \t\t\t\t\t\t]},\n    \t\t\t\t\t{id: 3, word: \"pferift\", language: \"Middle High German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n    \t\t\t\t]}\n    \t\t]\n    \t};\n    \tif(this.state.collections.length <= 0)\n    {\n    \tlet newCollections = [];\n    \tlet journeyWords = [];\n    \tjourneyWords = this.flattenTree(journeyWords, testJourney.words[0]);\n    \ttestJourney.words = journeyWords;\n    \tnewCollections.push(testJourney);\n    \tthis.setState({collections: newCollections}, (e) => {console.log(this.state.collections)});\n    }*/\n  }\n\n  openModal(e, modalComponent) {\n    this.setState({\n      activeModal: modalComponent\n    });\n  }\n\n  closeModal() {\n    if (this.state.activeModal) {\n      this.setState({\n        activeModal: null\n      });\n    }\n  }\n\n  openContextMenu(e, menuComponent) {\n    this.setState({\n      activeContextMenu: menuComponent\n    });\n  }\n\n  closeContextMenu() {\n    this.setState({\n      activeContextMenu: null\n    });\n  }\n\n  addNode(e, collectionIndex, newNode) {\n    // Data validation\n    let errorCollector = \"\";\n\n    if (this.state.collections[collectionIndex].type === \"cognate\") {\n      // Check for existing language\n      for (let i = 0; i < this.state.collections[collectionIndex].words.length; ++i) {\n        let childNode = this.state.collections[collectionIndex].words[i];\n\n        if (childNode.language === newNode.language) {\n          errorCollector += \"A language may only have one word per cognate collection.\\n\" + \"Additional cognate collections may re-use languages in other cognate collections.\";\n          break;\n        }\n      }\n    }\n\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error message with toast\n    else {\n      // Insert new node\n      let newCollections = this.state.collections;\n      newNode.arrayIndex = newCollections[collectionIndex].words.length;\n      newCollections[collectionIndex].words.push(newNode);\n      this.setState({\n        collections: newCollections\n      });\n    }\n  }\n  /**\n   * Updates the state's collections array with updated node\n   * @param e React SyntheticEvent\n   * @param collectionIndex Index of collection to which the node belongs\n   * @param updatedNode The updated node to be set in the collections array\n   */\n\n\n  editNode(e, collectionIndex, updatedNode) {\n    let newCollections = this.state.collections;\n    console.log(e);\n    console.log(collectionIndex);\n    console.log(updatedNode); // Find node\n\n    let node = newCollections[collectionIndex].words[updatedNode.arrayIndex]; // Update node by reference\n\n    for (let index in updatedNode) if (node[index]) node[index] = updatedNode[index];\n\n    this.setState({\n      collections: newCollections\n    }, () => {\n      console.log(\"Post-edit collections: \");\n      console.log(this.state.collections);\n      this.closeModal();\n    });\n  }\n\n  removeNode(e, collectionIndex, arrayIndex) {\n    let newCollections = this.state.collections; // Find node\n\n    let node = newCollections[collectionIndex].words[arrayIndex]; // Beginning of chain is always 0\n\n    let confirmed = false;\n    if (node.parents.length > 0) confirmed = window.confirm(\"Warning: this node is connected to \" + node.parents.length + \" parent nodes. The nodes will be unaffected by the deletion. Do you still wish to delete?\");else confirmed = window.confirm(\"Are you sure you wish to delete this node?\");\n    if (confirmed) newCollections[collectionIndex].words.splice(arrayIndex, 1); // Delete node\n\n    this.setState({\n      collections: newCollections\n    }, this.closeModal);\n  }\n\n  addCollection(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n    // TODO: For cognates, only one cognate per language should be allowed\n    //  - Future feature: for additional cognate collections, change solid colours to patterns of the specified colours instead (e.g. stripes; checks)\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      let newCollections = this.state.collections;\n      newCollections.push({\n        type: data.type,\n        header: data.header,\n        words: []\n      });\n      this.setState({\n        collections: newCollections\n      }, this.closeModal);\n    }\n  }\n\n  editCollection(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      let newCollections = this.state.collections;\n      newCollections[data.index].type = data.type;\n      newCollections[data.index].header = data.header;\n      this.setState({\n        collections: newCollections,\n        mapRenderCounter: this.state.mapRenderCounter + 1\n      }, this.closeModal);\n    }\n  }\n\n  removeCollection(e, collectionIndex) {\n    let newCollections = this.state.collections;\n    newCollections.splice(collectionIndex, 1);\n    this.setState({\n      collections: newCollections\n    }, function () {\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    let modalContainer = null,\n        contextMenuContainer = null;\n\n    if (this.state.activeModal !== null) {\n      let activeModal = this.state.activeModal;\n      modalContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-container\",\n        onClick: e => {\n          if (e.nativeEvent.target.className === \"modal-container\") this.closeModal(); // Closes modal if they click off the modal\n        },\n        children: activeModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 21\n      }, this);\n    }\n\n    if (this.state.activeContextMenu !== null) {\n      let activeContextMenu = this.state.activeContextMenu;\n      contextMenuContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-menu-container\",\n        onClick: this.closeContextMenu,\n        children: activeContextMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 5\n      }, this);\n    } //console.log(this.state.collections);\n\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Lema\",\n      children: [/*#__PURE__*/_jsxDEV(Banner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-view-container\",\n        children: [/*#__PURE__*/_jsxDEV(LeftBar, {\n          collections: this.state.collections,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          addJourney: this.addJourney,\n          addNode: this.addNode,\n          editNode: this.editNode,\n          editNodeColour: this.editNodeColour,\n          removeNode: this.removeNode,\n          addCollection: this.addCollection,\n          editCollection: this.editCollection,\n          removeCollection: this.removeCollection\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Map, {\n          collections: this.state.collections,\n          mapRenderCounter: this.state.mapRenderCounter,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          addNode: this.addNode,\n          editNode: this.editNode,\n          editNodeColour: this.editNodeColour,\n          removeNode: this.removeNode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 5\n      }, this), modalContainer, contextMenuContainer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Lema;","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/src/Lema.js"],"names":["Component","Banner","LeftBar","Map","Lema","constructor","props","state","activeModal","activeContextMenu","mapRef","collections","mapRenderCounter","flattenTree","bind","openModal","closeModal","openContextMenu","closeContextMenu","addCollection","editCollection","addJourney","addNode","editNode","removeNode","removeCollection","wordArray","edWords","structure","wordID","parents","wordObject","Object","keys","length","push","id","arrayIndex","word","language","language_name","colour","vertex","type","strokeColour","fillColour","radius","fontSize","x","y","edgeStart","edgeEnd","i","parent","find","edStructure","newCollections","journeyWords","newJourney","header","words","setState","e","console","log","componentDidMount","modalComponent","menuComponent","collectionIndex","newNode","errorCollector","childNode","alert","updatedNode","node","index","confirmed","window","confirm","splice","data","render","modalContainer","contextMenuContainer","nativeEvent","target","className","editNodeColour"],"mappings":"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","sourcesContent":["import \"./css/Lema.css\";\nimport {Component} from \"react\";\nimport {Banner} from \"./components/Banner\";\nimport {LeftBar} from \"./components/LeftBar\";\nimport {Map} from \"./components/Map\";\n\nclass Lema extends Component\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactiveModal: null, // Either null or a React component\n\t\t\tactiveContextMenu: null, // Either null or a React component\n\t\t\tmapRef: null,\n\t\t\tcollections: [\n\n\t\t\t\t/*{\n\t\t\t\t\ttype: \"journey\",\n\t\t\t\t\theader: {word: \"horse\", language: \"English (GB)\"},\n\t\t\t\t\twords: [\n\t\t\t\t\t\t{word: \"kers\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"krsos\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"hrussa\", language: \"Proto-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"hross\", language: \"Proto-West-Germanic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}},\n\t\t\t\t\t\t{word: \"horse\", language: \"English (GB)\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}}\n\t\t\t\t\t]\n\t\t\t\t},*/\n\t\t\t\t/*{   /!* One word, all cognates (same ancestor). TODO: Legend should detail the ancestors *!/\n\t\t\t\t\ttype: \"cognate\",\n\t\t\t\t\theader: {word: \"palfrey\", language: \"English (GB)\"},\n\t\t\t\t\twords: [\n\t\t\t\t\t\t{word: \"palfrey\", language: \"English (GB)\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"paard\", language: \"Dutch\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"Pferd\", language: \"German\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"Päerd\", language: \"Luxembourgish\", colour: \"#f5b60d\"},\n\t\t\t\t\t\t{word: \"פערד\", language: \"Yiddish\", colour: \"#f5b60d\"}\n\t\t\t\t\t]\n\t\t\t\t},*/\n\t\t\t\t\t// TODO: Multiple cognate collections at once (separate layers/patterned colours)\n\t\t\t\t/*{   /!* Multiple words, no shared countries. Demonstrates cognates of same English word across different families/languages. *!/\n\t\t\t\t\ttype: \"cognate\",\n\t\t\t\t\theader: {word: \"smith\", language: \"English (GB)\"},\n\t\t\t\t\twords: [\n\t\t\t\t\t\t{word: \"smith\", language: \"English (GB)\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smid\", language: \"Dutch\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"Schmidt\", language: \"German\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smed\", language: \"Danish\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smed\", language: \"Norwegian\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smed\", language: \"Swedish\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"smiður\", language: \"Icelandic\", colour: \"#f5b60d\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"forgeron\", language: \"French\", colour: \"#0000ff\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"fabbro\", language: \"Italian\", colour: \"#0000ff\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"Kovář\", language: \"Czech\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"kováč\", language: \"Slovak\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}},\n\t\t\t\t\t\t{word: \"kowal\", language: \"Polish\", colour: \"#ff0000\", label: {type: \"country\", customText: \"\", fontColour: \"#000000\", fontSize: null, x: null, y: null}}\n\t\t\t\t\t]\n\t\t\t\t}*/\n\t\t\t],\n\t\t\tmapRenderCounter: 0\n\t\t};\n\n\t\tthis.flattenTree = this.flattenTree.bind(this);\n\t\tthis.openModal = this.openModal.bind(this);\n\t\tthis.closeModal = this.closeModal.bind(this);\n\t\tthis.openContextMenu = this.openContextMenu.bind(this);\n\t\tthis.closeContextMenu = this.closeContextMenu.bind(this);\n\t\tthis.addCollection = this.addCollection.bind(this);\n\t\tthis.editCollection = this.editCollection.bind(this);\n\t\tthis.addJourney = this.addJourney.bind(this);\n\t\tthis.addNode = this.addNode.bind(this);\n\t\tthis.editNode = this.editNode.bind(this);\n\t\tthis.removeNode = this.removeNode.bind(this);\n\t\tthis.removeCollection = this.removeCollection.bind(this);\n\t}\n\n\tflattenTree(wordArray, edWords, structure, wordID)\n\t{\n\t\tlet parents = [], wordObject = {};\n\t\t// Parents\n\t\tif(Object.keys(structure).length > 0)\n\t\t{\n\t\t\t// Loop through parents\n\t\t\tfor(let wordID in structure)\n\t\t\t{\n\t\t\t\tparents.push(wordID);\n\t\t\t\twordArray = this.flattenTree(wordArray, edWords, structure[wordID], wordID);\n\t\t\t}\n\t\t}\n\n\t\t// Retrieve word from ED and convert to Lema-compatible object\n\t\twordObject = edWords[wordID];\n\t\twordObject = {\n\t\t\tid: wordID,\n\t\t\tarrayIndex: wordArray.length,\n\t\t\tword: wordObject.word,\n\t\t\tlanguage: wordObject.language_name,\n\t\t\tcolour: \"#000000\",\n\t\t\tvertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}\n\t\t}\n\t\tfor(let i = 0; i < parents.length; ++i)\n\t\t{\n\t\t\tlet parent = wordArray.find()\n\t\t}\n\t\twordArray.push(wordObject);\n\t\treturn wordArray;\n\t}\n\n\taddJourney(edWords, edStructure)\n\t{\n\t\tlet newCollections = this.state.collections;\n\n\t\t// Flatten the structure\n\t\tlet journeyWords = [];\n\t\tjourneyWords = this.flattenTree(journeyWords, edWords, edStructure, Object.keys(edStructure)[0], null);\n\n\t\t// Create the new journey and add it to collections\n\t\tlet newJourney = {type: \"journey\", header: journeyWords[journeyWords.length-1].word, language: journeyWords[journeyWords.length-1].language, words: journeyWords};\n\t\tnewJourney.words[0].word = \"test\";\n\t\tnewCollections.push(newJourney);\n\n\t\tthis.setState({collections: newCollections}, (e) => {console.log(this.state.collections);});\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\t/*// TODO: Temporary; same operation will be performed on incoming data from API\n\t\tlet testJourney =\n\t\t\t{\n\t\t\t\ttype: \"journey\",\n\t\t\t\theader: {word: \"Pferd\", language: \"German\"},\n\t\t\t\twords: [\n\t\t\t\t\t{id: 1, word: \"Pferd\", language: \"German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t{id: 2, word: \"pfarifrit\", language: \"Old High German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t{id: 4, word: \"paraveredus\", language: \"Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t{id: 6, word: \"veredus\", language: \"Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 8, word: \"werēdos\", language: \"Gaulish\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 10, word: \"uɸorēdos\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 12, word: \"uɸo\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 14, word: \"upo\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 13, word: \"rēdos\", language: \"Proto-Celtic\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{id: 5, word: \"paraveredus\", language: \"Late Latin\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t{id: 7, word: \"παρά\", language: \"Ancient Greek\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 9, word: \"preh₂-\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{id: 11, word: \"per-\", language: \"Proto-Indo-European\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{id: 3, word: \"pferift\", language: \"Middle High German\", colour: \"#000000\", vertex: {type: \"word\", strokeColour: \"#000000\", fillColour: \"#FFFFFF\", radius: null, fontSize: null, x: null, y: null, edgeStart: \"centre\", edgeEnd: \"centre\"}, parents: []}\n\t\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t};\n\n\t\tif(this.state.collections.length <= 0)\n\t\t{\n\t\t\tlet newCollections = [];\n\t\t\tlet journeyWords = [];\n\t\t\tjourneyWords = this.flattenTree(journeyWords, testJourney.words[0]);\n\t\t\ttestJourney.words = journeyWords;\n\t\t\tnewCollections.push(testJourney);\n\t\t\tthis.setState({collections: newCollections}, (e) => {console.log(this.state.collections)});\n\t\t}*/\n\t}\n\n\topenModal(e, modalComponent)\n\t{\n\t\tthis.setState({\n\t\t\tactiveModal: modalComponent\n\t\t});\n\t}\n\tcloseModal()\n\t{\n\t\tif(this.state.activeModal)\n\t\t{\n\t\t\tthis.setState({\n\t\t\t\tactiveModal: null\n\t\t\t});\n\t\t}\n\t}\n\topenContextMenu(e, menuComponent)\n\t{\n\t\tthis.setState({\n\t\t\tactiveContextMenu: menuComponent\n\t\t});\n\t}\n\tcloseContextMenu()\n\t{\n\t\tthis.setState({\n\t\t\tactiveContextMenu: null\n\t\t});\n\t}\n\n\taddNode(e, collectionIndex, newNode)\n\t{\n\t\t// Data validation\n\t\tlet errorCollector = \"\";\n\t\tif(this.state.collections[collectionIndex].type === \"cognate\")\n\t\t{\n\t\t\t// Check for existing language\n\t\t\tfor(let i = 0; i < this.state.collections[collectionIndex].words.length; ++i)\n\t\t\t{\n\t\t\t\tlet childNode = this.state.collections[collectionIndex].words[i];\n\t\t\t\tif(childNode.language === newNode.language)\n\t\t\t\t{\n\t\t\t\t\terrorCollector += \"A language may only have one word per cognate collection.\\n\" +\n\t\t\t\t\t\t\t\t\t  \"Additional cognate collections may re-use languages in other cognate collections.\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error message with toast\n\t\telse\n\t\t{\n\t\t\t// Insert new node\n\t\t\tlet newCollections = this.state.collections;\n\t\t\tnewNode.arrayIndex = newCollections[collectionIndex].words.length;\n\t\t\tnewCollections[collectionIndex].words.push(newNode);\n\n\t\t\tthis.setState({collections: newCollections});\n\t\t}\n\t}\n\n\t/**\n\t * Updates the state's collections array with updated node\n\t * @param e React SyntheticEvent\n\t * @param collectionIndex Index of collection to which the node belongs\n\t * @param updatedNode The updated node to be set in the collections array\n\t */\n\teditNode(e, collectionIndex, updatedNode)\n\t{\n\t\tlet newCollections = this.state.collections;\n\t\tconsole.log(e);\n\t\tconsole.log(collectionIndex);\n\t\tconsole.log(updatedNode);\n\n\t\t// Find node\n\t\tlet node = newCollections[collectionIndex].words[updatedNode.arrayIndex];\n\n\t\t// Update node by reference\n\t\tfor(let index in updatedNode)\n\t\t\tif(node[index]) node[index] = updatedNode[index];\n\n\t\tthis.setState({collections: newCollections}, () => {\n\t\t\tconsole.log(\"Post-edit collections: \");\n\t\t\tconsole.log(this.state.collections);\n\t\t\tthis.closeModal();\n\t\t});\n\t}\n\tremoveNode(e, collectionIndex, arrayIndex)\n\t{\n\t\tlet newCollections = this.state.collections;\n\n\t\t// Find node\n\t\tlet node = newCollections[collectionIndex].words[arrayIndex]; // Beginning of chain is always 0\n\t\tlet confirmed = false;\n\t\tif(node.parents.length > 0)\n\t\t\tconfirmed = window.confirm(\"Warning: this node is connected to \"+node.parents.length+\" parent nodes. The nodes will be unaffected by the deletion. Do you still wish to delete?\");\n\t\telse\n\t\t\tconfirmed = window.confirm(\"Are you sure you wish to delete this node?\");\n\n\t\tif(confirmed)\n\t\t\tnewCollections[collectionIndex].words.splice(arrayIndex, 1); // Delete node\n\n\t\tthis.setState({collections: newCollections}, this.closeModal);\n\t}\n\n\taddCollection(e, data)\n\t{\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\n\n\t\t// Data validation\n\t\t// TODO: For cognates, only one cognate per language should be allowed\n\t\t//  - Future feature: for additional cognate collections, change solid colours to patterns of the specified colours instead (e.g. stripes; checks)\n\t\tlet errorCollector = \"\";\n\t\tif(data.header.word === null || data.header.word.length <= 0)\n\t\t\terrorCollector += \"You must enter a word.\\n\";\n\t\tif(data.header.language === null || data.header.language.length <= 0)\n\t\t\terrorCollector += \"You must enter a language.\\n\";\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\n\t\telse\n\t\t{\n\t\t\tlet newCollections = this.state.collections;\n\t\t\tnewCollections.push({type: data.type, header: data.header, words: []});\n\t\t\tthis.setState( {collections: newCollections}, this.closeModal);\n\t\t}\n\t}\n\teditCollection(e, data)\n\t{\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\n\n\t\t// Data validation\n\t\tlet errorCollector = \"\";\n\t\tif(data.header.word === null || data.header.word.length <= 0)\n\t\t\terrorCollector += \"You must enter a word.\\n\";\n\t\tif(data.header.language === null || data.header.language.length <= 0)\n\t\t\terrorCollector += \"You must enter a language.\\n\";\n\n\t\tif(errorCollector.length > 0)\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\n\t\telse\n\t\t{\n\t\t\tlet newCollections = this.state.collections;\n\t\t\tnewCollections[data.index].type = data.type;\n\t\t\tnewCollections[data.index].header = data.header;\n\t\t\tthis.setState({collections: newCollections, mapRenderCounter: this.state.mapRenderCounter+1}, this.closeModal);\n\t\t}\n\t}\n\tremoveCollection(e, collectionIndex)\n\t{\n\t\tlet newCollections = this.state.collections;\n\t\tnewCollections.splice(collectionIndex, 1);\n\t\tthis.setState({collections: newCollections}, function()\n\t\t{\n\t\t\tconsole.log(this.state);\n\t\t});\n\t}\n\n\n\trender()\n\t{\n\t\tlet modalContainer = null, contextMenuContainer = null;\n\t\tif(this.state.activeModal !== null)\n\t\t{\n\t\t\tlet activeModal = this.state.activeModal;\n\t\t\tmodalContainer = <div className={\"modal-container\"} onClick={(e) =>\n\t\t\t{\n\t\t\t\tif(e.nativeEvent.target.className === \"modal-container\") this.closeModal(); // Closes modal if they click off the modal\n\t\t\t}}>{activeModal}</div>;\n\t\t}\n\t\tif(this.state.activeContextMenu !== null)\n\t\t{\n\t\t\tlet activeContextMenu = this.state.activeContextMenu;\n\t\t\tcontextMenuContainer =\n\t\t\t\t<div className={\"context-menu-container\"} onClick={this.closeContextMenu}>{activeContextMenu}</div>;\n\t\t}\n\n\t\t//console.log(this.state.collections);\n\n\t\treturn (\n\t\t\t<div className=\"Lema\">\n\t\t\t\t<Banner/>\n\t\t\t\t<div className={\"main-view-container\"}>\n\t\t\t\t\t<LeftBar collections={this.state.collections}\n\t\t\t\t\t         openModal={this.openModal} closeModal={this.closeModal}\n\t\t\t\t\t         openContextMenu={this.openContextMenu} closeContextMenu={this.closeContextMenu}\n\t\t\t\t\t         addJourney={this.addJourney}\n\t\t\t\t\t         addNode={this.addNode} editNode={this.editNode} editNodeColour={this.editNodeColour} removeNode={this.removeNode}\n\t\t\t\t\t         addCollection={this.addCollection} editCollection={this.editCollection} removeCollection={this.removeCollection}\n\t\t\t\t\t/>\n\t\t\t\t\t<Map collections={this.state.collections} mapRenderCounter={this.state.mapRenderCounter}\n\t\t\t\t\t     openContextMenu={this.openContextMenu} closeContextMenu={this.closeContextMenu}\n\t\t\t\t\t     openModal={this.openModal} closeModal={this.closeModal}\n\t\t\t\t\t\t addNode={this.addNode} editNode={this.editNode} editNodeColour={this.editNodeColour} removeNode={this.removeNode}  />\n\t\t\t\t</div>\n\t\t\t\t{modalContainer}\n\t\t\t\t{contextMenuContainer}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Lema;\n"]},"metadata":{},"sourceType":"module"}