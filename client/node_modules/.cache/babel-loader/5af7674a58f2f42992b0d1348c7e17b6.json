{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\client\\\\src\\\\components\\\\Collection.jsx\";\nimport React, { Component } from \"react\";\nimport { Meatballs } from \"./controls/Meatballs\";\nimport { Collapser } from \"./controls/Collapser\";\nimport { AddEditCollectionModal } from \"./modals/AddEditCollectionModal\";\nimport { AddEditNodeModal } from \"./modals/AddEditNodeModal\";\nimport { Button } from \"./controls/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CollectionNode extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const nodeColour = this.props.node.fillColour || this.props.node.vertex.fillColour; // TODO: Advanced logic for determining next unused colour (per journey)\n\n    let changeColourTimeout;\n    const collectionList = this.props.collections.filter((collection, i) => {\n      if (collection.type === this.props.type) {\n        collection.collectionIndex = i;\n        return true;\n      }\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collection-node\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => {\n          this.props.openModal(e, /*#__PURE__*/_jsxDEV(AddEditNodeModal, {\n            collectionList: collectionList,\n            words: this.props.words,\n            type: this.props.type,\n            node: this.props.node,\n            language: this.props.node.language,\n            onNodeSubmit: this.props.editNode,\n            collectionIndex: this.props.collectionIndex,\n            createToast: this.props.createToast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 30\n          }, this));\n        },\n        children: this.props.node.word\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => {\n          this.props.openModal(e, /*#__PURE__*/_jsxDEV(AddEditNodeModal, {\n            collectionList: collectionList,\n            words: this.props.words,\n            type: this.props.type,\n            node: this.props.node,\n            language: this.props.node.language,\n            onNodeSubmit: this.props.editNode,\n            collectionIndex: this.props.collectionIndex,\n            createToast: this.props.createToast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 30\n          }, this));\n        },\n        children: this.props.node.language\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"color\",\n          defaultValue: nodeColour,\n          onChange: e => {\n            // Throttle the onChange; there's no way to have it only change when the user clicks off of it, annoyingly\n            const node = this;\n            window.clearTimeout(changeColourTimeout);\n            changeColourTimeout = window.setTimeout(function () {\n              const updatedNode = { ...node.props.node\n              };\n              if (node.props.type === \"journey\") updatedNode.vertex.fillColour = e.target.value;else if (node.props.type === \"cognate\") updatedNode.fillColour = e.target.value;\n              node.props.editNode(e, node.props.collectionIndex, updatedNode);\n            }, 100);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          value: \"X\",\n          id: \"remove-node\",\n          onClick: e => this.props.removeNode(e, this.props.collectionIndex, this.props.node.arrayIndex)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport class Collection extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: false // Note: Could be lifted if we want persistence when editing types\n\n    };\n    this.toggleCollapse = this.toggleCollapse.bind(this);\n  }\n\n  toggleCollapse(e) {\n    this.setState({\n      collapsed: !this.state.collapsed\n    });\n  }\n\n  render() {\n    const wordComponents = [];\n    console.log(this.props);\n\n    if (!this.state.collapsed) {\n      for (let i = 0; i < this.props.words.length; ++i) {\n        wordComponents.push( /*#__PURE__*/_jsxDEV(CollectionNode, {\n          collections: this.props.collections,\n          type: this.props.type,\n          words: this.props.words,\n          node: this.props.words[i],\n          editNode: this.props.editNode,\n          removeNode: this.props.removeNode,\n          openModal: this.props.openModal,\n          collectionIndex: this.props.index // Index of collection the node belongs to\n          ,\n          createToast: this.props.createToast\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this));\n      }\n    }\n\n    const meatballItems = [{\n      text: \"Add node\",\n      handler: e => {\n        this.props.cAddNode(e, {\n          type: this.props.type,\n          collectionIndex: this.props.index,\n          words: this.props.words\n        });\n      }\n    }, {\n      text: \"Add node (default)\",\n      handler: e => {\n        this.props.cAddNodeDefault(e, {\n          type: this.props.type,\n          collectionIndex: this.props.index\n        });\n      }\n    }, {\n      text: \"Remove collection\",\n      handler: e => {\n        this.props.cRemoveCollection(e, this.props.index);\n      }\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collection-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"collection-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"name\",\n          onClick: e => {\n            this.props.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n              type: this.props.type,\n              name: this.props.header.name,\n              onCollectionSubmit: this.props.editCollection,\n              index: this.props.index,\n              createToast: this.props.createToast\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 31\n            }, this));\n          },\n          children: this.props.header.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"meatball-collapser-container\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            value: \"+\",\n            id: \"manual-add\",\n            style: {\n              alignSelf: \"end\"\n            },\n            onClick: e => {\n              this.props.cAddNode(e, {\n                type: this.props.type,\n                collectionIndex: this.props.index,\n                words: this.props.words\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            value: \"X\",\n            id: \"manual-delete\",\n            style: {\n              alignSelf: \"end\"\n            },\n            onClick: e => {\n              const userConfirmed = window.confirm(\"This will remove the entire collection of nodes from your map.\\nDo you wish to continue?\");\n              this.props.cRemoveCollection(e, this.props.index);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Collapser, {\n            toggleCollapse: this.toggleCollapse,\n            collapsed: this.state.collapsed\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }, this), wordComponents]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/client/src/components/Collection.jsx"],"names":["React","Component","Meatballs","Collapser","AddEditCollectionModal","AddEditNodeModal","Button","CollectionNode","constructor","props","render","nodeColour","node","fillColour","vertex","changeColourTimeout","collectionList","collections","filter","collection","i","type","collectionIndex","e","openModal","words","language","editNode","createToast","word","window","clearTimeout","setTimeout","updatedNode","target","value","removeNode","arrayIndex","Collection","state","collapsed","toggleCollapse","bind","setState","wordComponents","console","log","length","push","index","meatballItems","text","handler","cAddNode","cAddNodeDefault","cRemoveCollection","header","name","editCollection","alignSelf","userConfirmed","confirm"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,SAAR,QAAwB,sBAAxB;AACA,SAAQC,SAAR,QAAwB,sBAAxB;AACA,SAAQC,sBAAR,QAAqC,iCAArC;AACA,SAAQC,gBAAR,QAA+B,2BAA/B;AACA,SAAQC,MAAR,QAAqB,mBAArB;;;AAEA,MAAMC,cAAN,SAA6BN,SAA7B,CACA;AACCO,EAAAA,WAAW,CAACC,KAAD,EACX;AACC,UAAMA,KAAN;AACA;;AAEDC,EAAAA,MAAM,GACN;AACC,UAAMC,UAAU,GAAG,KAAKF,KAAL,CAAWG,IAAX,CAAgBC,UAAhB,IAA8B,KAAKJ,KAAL,CAAWG,IAAX,CAAgBE,MAAhB,CAAuBD,UAAxE,CADD,CACqF;;AACpF,QAAIE,mBAAJ;AACA,UAAMC,cAAc,GAAG,KAAKP,KAAL,CAAWQ,WAAX,CAAuBC,MAAvB,CAA8B,CAACC,UAAD,EAAaC,CAAb,KAAmB;AACvE,UAAGD,UAAU,CAACE,IAAX,KAAoB,KAAKZ,KAAL,CAAWY,IAAlC,EACA;AACCF,QAAAA,UAAU,CAACG,eAAX,GAA6BF,CAA7B;AACA,eAAO,IAAP;AACA;AACD,KANsB,CAAvB;AAQA,wBACC;AAAK,MAAA,SAAS,EAAE,iBAAhB;AAAA,8BAEC;AAAK,QAAA,OAAO,EAAGG,CAAD,IACd;AACC,eAAKd,KAAL,CAAWe,SAAX,CAAqBD,CAArB,eAAwB,QAAC,gBAAD;AACvB,YAAA,cAAc,EAAEP,cADO;AAEvB,YAAA,KAAK,EAAE,KAAKP,KAAL,CAAWgB,KAFK;AAGvB,YAAA,IAAI,EAAE,KAAKhB,KAAL,CAAWY,IAHM;AAIvB,YAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWG,IAJM;AAKvB,YAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWG,IAAX,CAAgBc,QALH;AAMvB,YAAA,YAAY,EAAE,KAAKjB,KAAL,CAAWkB,QANF;AAOvB,YAAA,eAAe,EAAE,KAAKlB,KAAL,CAAWa,eAPL;AAQvB,YAAA,WAAW,EAAE,KAAKb,KAAL,CAAWmB;AARD;AAAA;AAAA;AAAA;AAAA,kBAAxB;AAUA,SAZD;AAAA,kBAYI,KAAKnB,KAAL,CAAWG,IAAX,CAAgBiB;AAZpB;AAAA;AAAA;AAAA;AAAA,cAFD,eAeC;AAAK,QAAA,OAAO,EAAGN,CAAD,IACd;AACC,eAAKd,KAAL,CAAWe,SAAX,CAAqBD,CAArB,eAAwB,QAAC,gBAAD;AACvB,YAAA,cAAc,EAAEP,cADO;AAEvB,YAAA,KAAK,EAAE,KAAKP,KAAL,CAAWgB,KAFK;AAGvB,YAAA,IAAI,EAAE,KAAKhB,KAAL,CAAWY,IAHM;AAIvB,YAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWG,IAJM;AAKvB,YAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWG,IAAX,CAAgBc,QALH;AAMvB,YAAA,YAAY,EAAE,KAAKjB,KAAL,CAAWkB,QANF;AAOvB,YAAA,eAAe,EAAE,KAAKlB,KAAL,CAAWa,eAPL;AAQvB,YAAA,WAAW,EAAE,KAAKb,KAAL,CAAWmB;AARD;AAAA;AAAA;AAAA;AAAA,kBAAxB;AAUA,SAZD;AAAA,kBAYI,KAAKnB,KAAL,CAAWG,IAAX,CAAgBc;AAZpB;AAAA;AAAA;AAAA;AAAA,cAfD,eA4BC;AAAK,QAAA,SAAS,EAAE,mBAAhB;AAAA,gCACC;AAAO,UAAA,IAAI,EAAE,OAAb;AAAsB,UAAA,YAAY,EAAEf,UAApC;AAAgD,UAAA,QAAQ,EAAGY,CAAD,IAAO;AAChE;AACA,kBAAMX,IAAI,GAAG,IAAb;AACAkB,YAAAA,MAAM,CAACC,YAAP,CAAoBhB,mBAApB;AACAA,YAAAA,mBAAmB,GAAGe,MAAM,CAACE,UAAP,CAAkB,YACxC;AACC,oBAAMC,WAAW,GAAG,EACnB,GAAGrB,IAAI,CAACH,KAAL,CAAWG;AADK,eAApB;AAGA,kBAAGA,IAAI,CAACH,KAAL,CAAWY,IAAX,KAAoB,SAAvB,EACCY,WAAW,CAACnB,MAAZ,CAAmBD,UAAnB,GAAgCU,CAAC,CAACW,MAAF,CAASC,KAAzC,CADD,KAEK,IAAGvB,IAAI,CAACH,KAAL,CAAWY,IAAX,KAAoB,SAAvB,EACJY,WAAW,CAACpB,UAAZ,GAAyBU,CAAC,CAACW,MAAF,CAASC,KAAlC;AACDvB,cAAAA,IAAI,CAACH,KAAL,CAAWkB,QAAX,CAAoBJ,CAApB,EAAuBX,IAAI,CAACH,KAAL,CAAWa,eAAlC,EAAmDW,WAAnD;AACA,aAVqB,EAUnB,GAVmB,CAAtB;AAWA;AAfD;AAAA;AAAA;AAAA;AAAA,gBADD,eAiBC,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAE,GAAf;AAAoB,UAAA,EAAE,EAAE,aAAxB;AACQ,UAAA,OAAO,EAAGV,CAAD,IAAO,KAAKd,KAAL,CAAW2B,UAAX,CAAsBb,CAAtB,EAAyB,KAAKd,KAAL,CAAWa,eAApC,EAAqD,KAAKb,KAAL,CAAWG,IAAX,CAAgByB,UAArE;AADxB;AAAA;AAAA;AAAA;AAAA,gBAjBD;AAAA;AAAA;AAAA;AAAA;AAAA,cA5BD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAmDA;;AArEF;;AAwEA,OAAO,MAAMC,UAAN,SAAyBrC,SAAzB,CACP;AACCO,EAAAA,WAAW,CAACC,KAAD,EACX;AACC,UAAMA,KAAN;AACA,SAAK8B,KAAL,GAAa;AACZC,MAAAA,SAAS,EAAE,KADC,CACM;;AADN,KAAb;AAIA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACA;;AAEDD,EAAAA,cAAc,CAAClB,CAAD,EACd;AACC,SAAKoB,QAAL,CAAc;AAACH,MAAAA,SAAS,EAAE,CAAC,KAAKD,KAAL,CAAWC;AAAxB,KAAd;AACA;;AAED9B,EAAAA,MAAM,GACN;AACC,UAAMkC,cAAc,GAAG,EAAvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKrC,KAAjB;;AAEA,QAAG,CAAC,KAAK8B,KAAL,CAAWC,SAAf,EACA;AACC,WAAI,IAAIpB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKX,KAAL,CAAWgB,KAAX,CAAiBsB,MAApC,EAA4C,EAAE3B,CAA9C,EACA;AACCwB,QAAAA,cAAc,CAACI,IAAf,eAAoB,QAAC,cAAD;AAEnB,UAAA,WAAW,EAAE,KAAKvC,KAAL,CAAWQ,WAFL;AAGnB,UAAA,IAAI,EAAE,KAAKR,KAAL,CAAWY,IAHE;AAInB,UAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWgB,KAJC;AAKnB,UAAA,IAAI,EAAE,KAAKhB,KAAL,CAAWgB,KAAX,CAAiBL,CAAjB,CALa;AAMnB,UAAA,QAAQ,EAAE,KAAKX,KAAL,CAAWkB,QANF;AAOnB,UAAA,UAAU,EAAE,KAAKlB,KAAL,CAAW2B,UAPJ;AAQnB,UAAA,SAAS,EAAE,KAAK3B,KAAL,CAAWe,SARH;AASnB,UAAA,eAAe,EAAE,KAAKf,KAAL,CAAWwC,KATT,CASiB;AATjB;AAUnB,UAAA,WAAW,EAAE,KAAKxC,KAAL,CAAWmB;AAVL,WACdR,CADc;AAAA;AAAA;AAAA;AAAA,gBAApB;AAYA;AACD;;AAED,UAAM8B,aAAa,GAAG,CACrB;AACCC,MAAAA,IAAI,EAAE,UADP;AACmBC,MAAAA,OAAO,EAAG7B,CAAD,IAC3B;AACC,aAAKd,KAAL,CAAW4C,QAAX,CAAoB9B,CAApB,EAAuB;AAACF,UAAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWY,IAAlB;AAAwBC,UAAAA,eAAe,EAAE,KAAKb,KAAL,CAAWwC,KAApD;AAA2DxB,UAAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWgB;AAA7E,SAAvB;AACA;AAJF,KADqB,EAOrB;AACC0B,MAAAA,IAAI,EAAE,oBADP;AAC6BC,MAAAA,OAAO,EAAG7B,CAAD,IACrC;AACC,aAAKd,KAAL,CAAW6C,eAAX,CAA2B/B,CAA3B,EAA8B;AAACF,UAAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWY,IAAlB;AAAwBC,UAAAA,eAAe,EAAE,KAAKb,KAAL,CAAWwC;AAApD,SAA9B;AACA;AAJF,KAPqB,EAarB;AACCE,MAAAA,IAAI,EAAE,mBADP;AAC4BC,MAAAA,OAAO,EAAG7B,CAAD,IACpC;AACC,aAAKd,KAAL,CAAW8C,iBAAX,CAA6BhC,CAA7B,EAAgC,KAAKd,KAAL,CAAWwC,KAA3C;AACA;AAJF,KAbqB,CAAtB;AAqBA,wBACC;AAAK,MAAA,SAAS,EAAE,sBAAhB;AAAA,8BACC;AAAK,QAAA,SAAS,EAAE,mBAAhB;AAAA,gCAEC;AAAK,UAAA,SAAS,EAAE,MAAhB;AAAwB,UAAA,OAAO,EAAG1B,CAAD,IACjC;AACC,iBAAKd,KAAL,CAAWe,SAAX,CAAqBD,CAArB,eAAwB,QAAC,sBAAD;AACvB,cAAA,IAAI,EAAE,KAAKd,KAAL,CAAWY,IADM;AAEvB,cAAA,IAAI,EAAE,KAAKZ,KAAL,CAAW+C,MAAX,CAAkBC,IAFD;AAGvB,cAAA,kBAAkB,EAAE,KAAKhD,KAAL,CAAWiD,cAHR;AAIvB,cAAA,KAAK,EAAE,KAAKjD,KAAL,CAAWwC,KAJK;AAKvB,cAAA,WAAW,EAAE,KAAKxC,KAAL,CAAWmB;AALD;AAAA;AAAA;AAAA;AAAA,oBAAxB;AAOA,WATD;AAAA,oBASI,KAAKnB,KAAL,CAAW+C,MAAX,CAAkBC;AATtB;AAAA;AAAA;AAAA;AAAA,gBAFD,eAYC;AAAK,UAAA,SAAS,EAAE,8BAAhB;AAAA,kCACC,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAE,GAAf;AAAoB,YAAA,EAAE,EAAE,YAAxB;AAAsC,YAAA,KAAK,EAAE;AAACE,cAAAA,SAAS,EAAE;AAAZ,aAA7C;AACQ,YAAA,OAAO,EAAGpC,CAAD,IAAO;AACf,mBAAKd,KAAL,CAAW4C,QAAX,CAAoB9B,CAApB,EAAuB;AAACF,gBAAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWY,IAAlB;AAAwBC,gBAAAA,eAAe,EAAE,KAAKb,KAAL,CAAWwC,KAApD;AAA2DxB,gBAAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWgB;AAA7E,eAAvB;AACA;AAHT;AAAA;AAAA;AAAA;AAAA,kBADD,eAMC,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAE,GAAf;AAAoB,YAAA,EAAE,EAAE,eAAxB;AAAyC,YAAA,KAAK,EAAE;AAACkC,cAAAA,SAAS,EAAE;AAAZ,aAAhD;AACQ,YAAA,OAAO,EAAGpC,CAAD,IAAO;AACrB,oBAAMqC,aAAa,GAAG9B,MAAM,CAAC+B,OAAP,CAAe,0FAAf,CAAtB;AACM,mBAAKpD,KAAL,CAAW8C,iBAAX,CAA6BhC,CAA7B,EAAgC,KAAKd,KAAL,CAAWwC,KAA3C;AACA;AAJT;AAAA;AAAA;AAAA;AAAA,kBAND,eAYC,QAAC,SAAD;AAAW,YAAA,cAAc,EAAE,KAAKR,cAAhC;AAAgD,YAAA,SAAS,EAAE,KAAKF,KAAL,CAAWC;AAAtE;AAAA;AAAA;AAAA;AAAA,kBAZD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZD;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,EA4BEI,cA5BF;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAgCA;;AA7FF","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Meatballs} from \"./controls/Meatballs\";\r\nimport {Collapser} from \"./controls/Collapser\";\r\nimport {AddEditCollectionModal} from \"./modals/AddEditCollectionModal\";\r\nimport {AddEditNodeModal} from \"./modals/AddEditNodeModal\";\r\nimport {Button} from \"./controls/Button\";\r\n\r\nclass CollectionNode extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst nodeColour = this.props.node.fillColour || this.props.node.vertex.fillColour; // TODO: Advanced logic for determining next unused colour (per journey)\r\n\t\tlet changeColourTimeout;\r\n\t\tconst collectionList = this.props.collections.filter((collection, i) => {\r\n\t\t\tif(collection.type === this.props.type)\r\n\t\t\t{\r\n\t\t\t\tcollection.collectionIndex = i;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<div className={\"collection-node\"}>\r\n\t\t\t\t{/* Flex-row */}\r\n\t\t\t\t<div onClick={(e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.openModal(e, <AddEditNodeModal\r\n\t\t\t\t\t\tcollectionList={collectionList}\r\n\t\t\t\t\t\twords={this.props.words}\r\n\t\t\t\t\t\ttype={this.props.type}\r\n\t\t\t\t\t\tnode={this.props.node}\r\n\t\t\t\t\t\tlanguage={this.props.node.language}\r\n\t\t\t\t\t\tonNodeSubmit={this.props.editNode}\r\n\t\t\t\t\t\tcollectionIndex={this.props.collectionIndex}\r\n\t\t\t\t\t\tcreateToast={this.props.createToast}\r\n\t\t\t\t\t/>);\r\n\t\t\t\t}}>{this.props.node.word}</div>\r\n\t\t\t\t<div onClick={(e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.openModal(e, <AddEditNodeModal\r\n\t\t\t\t\t\tcollectionList={collectionList}\r\n\t\t\t\t\t\twords={this.props.words}\r\n\t\t\t\t\t\ttype={this.props.type}\r\n\t\t\t\t\t\tnode={this.props.node}\r\n\t\t\t\t\t\tlanguage={this.props.node.language}\r\n\t\t\t\t\t\tonNodeSubmit={this.props.editNode}\r\n\t\t\t\t\t\tcollectionIndex={this.props.collectionIndex}\r\n\t\t\t\t\t\tcreateToast={this.props.createToast}\r\n\t\t\t\t\t/>);\r\n\t\t\t\t}}>{this.props.node.language}</div>\r\n\t\t\t\t<div className={\"buttons-container\"}>\r\n\t\t\t\t\t<input type={\"color\"} defaultValue={nodeColour} onChange={(e) => {\r\n\t\t\t\t\t\t// Throttle the onChange; there's no way to have it only change when the user clicks off of it, annoyingly\r\n\t\t\t\t\t\tconst node = this;\r\n\t\t\t\t\t\twindow.clearTimeout(changeColourTimeout);\r\n\t\t\t\t\t\tchangeColourTimeout = window.setTimeout(function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconst updatedNode = {\r\n\t\t\t\t\t\t\t\t...node.props.node\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif(node.props.type === \"journey\")\r\n\t\t\t\t\t\t\t\tupdatedNode.vertex.fillColour = e.target.value;\r\n\t\t\t\t\t\t\telse if(node.props.type === \"cognate\")\r\n\t\t\t\t\t\t\t\tupdatedNode.fillColour = e.target.value;\r\n\t\t\t\t\t\t\tnode.props.editNode(e, node.props.collectionIndex, updatedNode);\r\n\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t}}/>\r\n\t\t\t\t\t<Button value={\"X\"} id={\"remove-node\"}\r\n\t\t\t\t\t        onClick={(e) => this.props.removeNode(e, this.props.collectionIndex, this.props.node.arrayIndex)}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class Collection extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcollapsed: false, // Note: Could be lifted if we want persistence when editing types\r\n\t\t};\r\n\r\n\t\tthis.toggleCollapse = this.toggleCollapse.bind(this);\r\n\t}\r\n\r\n\ttoggleCollapse(e)\r\n\t{\r\n\t\tthis.setState({collapsed: !this.state.collapsed});\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst wordComponents = [];\r\n\t\tconsole.log(this.props);\r\n\r\n\t\tif(!this.state.collapsed)\r\n\t\t{\r\n\t\t\tfor(let i = 0; i < this.props.words.length; ++i)\r\n\t\t\t{\r\n\t\t\t\twordComponents.push(<CollectionNode\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tcollections={this.props.collections}\r\n\t\t\t\t\ttype={this.props.type}\r\n\t\t\t\t\twords={this.props.words}\r\n\t\t\t\t\tnode={this.props.words[i]}\r\n\t\t\t\t\teditNode={this.props.editNode}\r\n\t\t\t\t\tremoveNode={this.props.removeNode}\r\n\t\t\t\t\topenModal={this.props.openModal}\r\n\t\t\t\t\tcollectionIndex={this.props.index}  // Index of collection the node belongs to\r\n\t\t\t\t\tcreateToast={this.props.createToast}\r\n\t\t\t\t/>);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst meatballItems = [\r\n\t\t\t{\r\n\t\t\t\ttext: \"Add node\", handler: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.cAddNode(e, {type: this.props.type, collectionIndex: this.props.index, words: this.props.words});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Add node (default)\", handler: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.cAddNodeDefault(e, {type: this.props.type, collectionIndex: this.props.index});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Remove collection\", handler: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.cRemoveCollection(e, this.props.index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<div className={\"collection-container\"}>\r\n\t\t\t\t<div className={\"collection-header\"}>\r\n\t\t\t\t\t{/* Flex-row */}\r\n\t\t\t\t\t<div className={\"name\"} onClick={(e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.openModal(e, <AddEditCollectionModal\r\n\t\t\t\t\t\t\ttype={this.props.type}\r\n\t\t\t\t\t\t\tname={this.props.header.name}\r\n\t\t\t\t\t\t\tonCollectionSubmit={this.props.editCollection}\r\n\t\t\t\t\t\t\tindex={this.props.index}\r\n\t\t\t\t\t\t\tcreateToast={this.props.createToast}\r\n\t\t\t\t\t\t/>);\r\n\t\t\t\t\t}}>{this.props.header.name}</div>\r\n\t\t\t\t\t<div className={\"meatball-collapser-container\"}>\r\n\t\t\t\t\t\t<Button value={\"+\"} id={\"manual-add\"} style={{alignSelf: \"end\"}}\r\n\t\t\t\t\t\t        onClick={(e) => {\r\n\t\t\t\t\t\t\t        this.props.cAddNode(e, {type: this.props.type, collectionIndex: this.props.index, words: this.props.words});\r\n\t\t\t\t\t\t        }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Button value={\"X\"} id={\"manual-delete\"} style={{alignSelf: \"end\"}}\r\n\t\t\t\t\t\t        onClick={(e) => {\r\n\t\t\t\t\t\t\t\t\tconst userConfirmed = window.confirm(\"This will remove the entire collection of nodes from your map.\\nDo you wish to continue?\");\r\n\t\t\t\t\t\t\t        this.props.cRemoveCollection(e, this.props.index);\r\n\t\t\t\t\t\t        }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Collapser toggleCollapse={this.toggleCollapse} collapsed={this.state.collapsed}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{wordComponents}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}