{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\src\\\\components\\\\Collections.jsx\";\nimport { Component } from \"react\";\nimport { Collection } from \"./Collection\";\nimport { Button } from \"./Button\";\nimport { AddEditCollectionModal } from \"./AddEditCollectionModal\";\nimport { AddEditNodeModal } from \"./AddEditNodeModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class Collections extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [{\n        // TODO: Dummy data\n        type: \"journey\",\n        header: {\n          word: \"horse\",\n          language: \"English (UK)\"\n        },\n        childNodes: [{\n          word: \"kers\",\n          language: \"Proto-Indo-European\"\n        }, {\n          word: \"krsos\",\n          language: \"Proto-Indo-European\"\n        }, {\n          word: \"hrussa\",\n          language: \"Proto-Germanic\"\n        }, {\n          word: \"hross\",\n          language: \"Proto-West-Germanic\"\n        }, {\n          word: \"horse\",\n          language: \"English\"\n        }]\n      }]\n    };\n    this.onNodeColourClick = this.onNodeColourClick.bind(this);\n    this.onAddCollectionSubmit = this.onAddCollectionSubmit.bind(this);\n    this.onEditCollectionSubmit = this.onEditCollectionSubmit.bind(this);\n    this.onAddNodeSubmit = this.onAddNodeSubmit.bind(this);\n    this.onEditNodeSubmit = this.props.onEditNodeSubmit.bind(this);\n    this.addNodeHandler = this.addNodeHandler.bind(this);\n    this.addNodeDefaultHandler = this.addNodeDefaultHandler.bind(this);\n    this.openModal = this.props.openModal.bind(this);\n    this.closeModal = this.props.closeModal.bind(this);\n    this.openContextMenu = this.props.openContextMenu.bind(this);\n    this.closeContextMenu = this.props.closeContextMenu.bind(this);\n  }\n  /**\r\n   * Open a modal that allows user to change the colour of the node on the map\r\n   */\n\n\n  onNodeColourClick(e, node) {\n    // TODO: Open modal, allow user choice\n    let newValue = \"red\"; // Find node and set colour\n\n    let newItems = this.state.items;\n\n    for (let i = 0; i < newItems.length; ++i) {\n      for (let j = 0; j < newItems[i].childNodes.length; ++j) {\n        let childNode = newItems[i].childNodes[j];\n\n        if (childNode === node) {\n          newItems[i].childNodes[j].colour = newValue;\n        }\n      }\n    }\n\n    this.setState({\n      items: newItems\n    });\n  }\n\n  onAddCollectionSubmit(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      this.setState(prevState => ({\n        items: [...prevState.items, {\n          type: data.type,\n          header: data.header,\n          childNodes: []\n        }]\n      }), this.closeModal);\n    }\n  }\n\n  onEditCollectionSubmit(e, data) {\n    console.log(data);\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    let newItems = this.state.items;\n    newItems[data.index].type = data.type;\n    newItems[data.index].header = data.header;\n    this.setState({\n      items: newItems\n    }, this.closeModal);\n  }\n  /* Context menu item handlers */\n\n\n  addNodeHandler(e, parentIndex) {\n    // Open the AddEditNodeModal\n    this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditNodeModal, {\n      onAddNodeSubmit: this.onAddNodeSubmit,\n      parentIndex: parentIndex\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }, this));\n  }\n\n  addNodeDefaultHandler(e, parentIndex) {\n    this.onAddNodeSubmit(e, {\n      word: \"word\",\n      language: \"language\",\n      parentIndex: parentIndex\n    });\n  }\n\n  onAddNodeSubmit(e, data) {\n    // Data validation\n    let errorCollector = \"\";\n    if (data.word === null || data.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.language === null || data.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      // Create new child node\n      let newChildNode = {\n        word: data.word,\n        language: data.language\n      };\n      let newItems = this.state.items;\n      newItems[data.parentIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.items array)\n\n      this.setState({\n        items: newItems\n      }, this.closeModal);\n    }\n  }\n\n  onEditNodeSubmit(e, data) {\n    // Data validation\n    let errorCollector = \"\";\n    if (data.word === null || data.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.language === null || data.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      // Create new child node\n      let newChildNode = {\n        word: data.word,\n        language: data.language\n      };\n      let newItems = this.state.items;\n      newItems[data.parentIndex].childNodes[data.childIndex] = {\n        word: data.word,\n        language: data.language\n      };\n      this.setState({\n        items: newItems\n      }, this.closeModal);\n    }\n  }\n\n  render() {\n    // TODO: Consider whether both cognates AND journeys may be displayed at the same time\n    let journeys = null,\n        cognates = null;\n    let journeyElements = [],\n        cognateElements = [];\n    this.state.items.map((item, index) => {\n      if (item.type === \"journey\") {\n        journeyElements.push( /*#__PURE__*/_jsxDEV(Collection, {\n          index: index,\n          type: item.type,\n          header: item.header,\n          openModal: this.openModal,\n          childNodes: item.childNodes,\n          onNodeColourClick: this.onNodeColourClick,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          addNodeHandler: this.addNodeHandler,\n          onAddNodeSubmit: this.onAddNodeSubmit,\n          addNodeDefaultHandler: this.addNodeDefaultHandler,\n          onEditCollectionSubmit: this.onEditCollectionSubmit\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 26\n        }, this));\n      } else if (item.type === \"cognate\") {\n        cognateElements.push( /*#__PURE__*/_jsxDEV(Collection, {\n          index: index,\n          type: item.type,\n          header: item.header,\n          openModal: this.openModal,\n          childNodes: item.childNodes,\n          onNodeColourClick: this.onNodeColourClick,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          addNodeHandler: this.addNodeHandler,\n          onAddNodeSubmit: this.onAddNodeSubmit,\n          addNodeDefaultHandler: this.addNodeDefaultHandler,\n          onEditCollectionSubmit: this.onEditCollectionSubmit\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 26\n        }, this));\n      }\n    });\n\n    if (journeyElements.length > 0) {\n      journeys = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Journeys\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            value: \"+\",\n            id: \"manual-add\",\n            style: {\n              alignSelf: \"end\"\n            },\n            onClick: e => {\n              this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n                onCollectionSubmit: this.onAddCollectionSubmit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 26\n              }, this));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 6\n        }, this), journeyElements]\n      }, void 0, true);\n    }\n\n    if (cognateElements.length > 0) {\n      cognates = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Cognates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            value: \"+\",\n            id: \"manual-add\",\n            style: {\n              alignSelf: \"end\"\n            },\n            onClick: e => {\n              this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n                onCollectionSubmit: this.onAddCollectionSubmit,\n                type: \"Cognates\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 26\n              }, this));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 6\n        }, this), cognateElements]\n      }, void 0, true);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collections-container\",\n      children: [journeys, cognates]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/src/components/Collections.jsx"],"names":["Component","Collection","Button","AddEditCollectionModal","AddEditNodeModal","Collections","constructor","props","state","items","type","header","word","language","childNodes","onNodeColourClick","bind","onAddCollectionSubmit","onEditCollectionSubmit","onAddNodeSubmit","onEditNodeSubmit","addNodeHandler","addNodeDefaultHandler","openModal","closeModal","openContextMenu","closeContextMenu","e","node","newValue","newItems","i","length","j","childNode","colour","setState","data","errorCollector","alert","prevState","console","log","index","parentIndex","newChildNode","push","childIndex","render","journeys","cognates","journeyElements","cognateElements","map","item","alignSelf"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\r\nimport {Collection} from \"./Collection\";\r\nimport {Button} from \"./Button\";\r\nimport {AddEditCollectionModal} from \"./AddEditCollectionModal\";\r\nimport {AddEditNodeModal} from \"./AddEditNodeModal\";\r\n\r\nexport class Collections extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\t// TODO: Dummy data\r\n\t\t\t\t\ttype: \"journey\",\r\n\t\t\t\t\theader: {word: \"horse\", language: \"English (UK)\"},\r\n\t\t\t\t\tchildNodes: [\r\n\t\t\t\t\t\t{word: \"kers\", language: \"Proto-Indo-European\"},\r\n\t\t\t\t\t\t{word: \"krsos\", language: \"Proto-Indo-European\"},\r\n\t\t\t\t\t\t{word: \"hrussa\", language: \"Proto-Germanic\"},\r\n\t\t\t\t\t\t{word: \"hross\", language: \"Proto-West-Germanic\"},\r\n\t\t\t\t\t\t{word: \"horse\", language: \"English\"}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tthis.onNodeColourClick = this.onNodeColourClick.bind(this);\r\n\t\tthis.onAddCollectionSubmit = this.onAddCollectionSubmit.bind(this);\r\n\t\tthis.onEditCollectionSubmit = this.onEditCollectionSubmit.bind(this);\r\n\t\tthis.onAddNodeSubmit = this.onAddNodeSubmit.bind(this);\r\n\t\tthis.onEditNodeSubmit = this.props.onEditNodeSubmit.bind(this);\r\n\t\tthis.addNodeHandler = this.addNodeHandler.bind(this);\r\n\t\tthis.addNodeDefaultHandler = this.addNodeDefaultHandler.bind(this);\r\n\t\tthis.openModal = this.props.openModal.bind(this);\r\n\t\tthis.closeModal = this.props.closeModal.bind(this);\r\n\t\tthis.openContextMenu = this.props.openContextMenu.bind(this);\r\n\t\tthis.closeContextMenu = this.props.closeContextMenu.bind(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Open a modal that allows user to change the colour of the node on the map\r\n\t */\r\n\tonNodeColourClick(e, node)\r\n\t{\r\n\t\t// TODO: Open modal, allow user choice\r\n\t\tlet newValue = \"red\";\r\n\r\n\t\t// Find node and set colour\r\n\t\tlet newItems = this.state.items;\r\n\t\tfor(let i = 0; i < newItems.length; ++i)\r\n\t\t{\r\n\t\t\tfor(let j = 0; j < newItems[i].childNodes.length; ++j)\r\n\t\t\t{\r\n\t\t\t\tlet childNode = newItems[i].childNodes[j];\r\n\t\t\t\tif(childNode === node)\r\n\t\t\t\t{\r\n\t\t\t\t\tnewItems[i].childNodes[j].colour = newValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({items: newItems});\r\n\t}\r\n\r\n\tonAddCollectionSubmit(e, data)\r\n\t{\r\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\r\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\r\n\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.header.word === null || data.header.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.header.language === null || data.header.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tif(errorCollector.length > 0)\r\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\titems: [\r\n\t\t\t\t\t...prevState.items,\r\n\t\t\t\t\t{type: data.type, header: data.header, childNodes: []}\r\n\t\t\t\t]\r\n\t\t\t}), this.closeModal);\r\n\t\t}\r\n\t}\r\n\tonEditCollectionSubmit(e, data)\r\n\t{\r\n\t\tconsole.log(data);\r\n\r\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\r\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\r\n\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.header.word === null || data.header.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.header.language === null || data.header.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tlet newItems = this.state.items;\r\n\t\tnewItems[data.index].type = data.type;\r\n\t\tnewItems[data.index].header = data.header;\r\n\t\tthis.setState({items: newItems}, this.closeModal);\r\n\t}\r\n\r\n\t/* Context menu item handlers */\r\n\taddNodeHandler(e, parentIndex)\r\n\t{\r\n\t\t// Open the AddEditNodeModal\r\n\t\tthis.openModal(e, <AddEditNodeModal onAddNodeSubmit={this.onAddNodeSubmit} parentIndex={parentIndex}/>);\r\n\t}\r\n\taddNodeDefaultHandler(e, parentIndex)\r\n\t{\r\n\t\tthis.onAddNodeSubmit(e, {word: \"word\", language: \"language\", parentIndex: parentIndex});\r\n\t}\r\n\tonAddNodeSubmit(e, data)\r\n\t{\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.word === null || data.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.language === null || data.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tif(errorCollector.length > 0)\r\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Create new child node\r\n\t\t\tlet newChildNode = {word: data.word, language: data.language};\r\n\t\t\tlet newItems = this.state.items;\r\n\t\t\tnewItems[data.parentIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.items array)\r\n\r\n\t\t\tthis.setState({items: newItems}, this.closeModal);\r\n\t\t}\r\n\t}\r\n\tonEditNodeSubmit(e, data)\r\n\t{\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.word === null || data.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.language === null || data.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tif(errorCollector.length > 0)\r\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Create new child node\r\n\t\t\tlet newChildNode = {word: data.word, language: data.language};\r\n\t\t\tlet newItems = this.state.items;\r\n\t\t\tnewItems[data.parentIndex].childNodes[data.childIndex] = {word: data.word, language: data.language};\r\n\r\n\t\t\tthis.setState({items: newItems}, this.closeModal);\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\t// TODO: Consider whether both cognates AND journeys may be displayed at the same time\r\n\t\tlet journeys = null, cognates = null;\r\n\t\tlet journeyElements = [], cognateElements = [];\r\n\t\tthis.state.items.map((item, index) =>\r\n\t\t{\r\n\t\t\tif(item.type === \"journey\")\r\n\t\t\t{\r\n\t\t\t\tjourneyElements.push(<Collection\r\n\t\t\t\t\tkey={index} index={index} type={item.type} header={item.header} openModal={this.openModal}\r\n\t\t\t\t\tchildNodes={item.childNodes}\r\n\t\t\t\t\tonNodeColourClick={this.onNodeColourClick} openContextMenu={this.openContextMenu}\r\n\t\t\t\t\tcloseContextMenu={this.closeContextMenu} addNodeHandler={this.addNodeHandler}\r\n\t\t\t\t\tonAddNodeSubmit={this.onAddNodeSubmit} addNodeDefaultHandler={this.addNodeDefaultHandler}\r\n\t\t\t\t\tonEditCollectionSubmit={this.onEditCollectionSubmit}\r\n\t\t\t\t/>);\r\n\t\t\t}\r\n\t\t\telse if(item.type === \"cognate\")\r\n\t\t\t{\r\n\t\t\t\tcognateElements.push(<Collection\r\n\t\t\t\t\tkey={index} index={index} type={item.type} header={item.header} openModal={this.openModal}\r\n\t\t\t\t\tchildNodes={item.childNodes}\r\n\t\t\t\t\tonNodeColourClick={this.onNodeColourClick} openContextMenu={this.openContextMenu}\r\n\t\t\t\t\tcloseContextMenu={this.closeContextMenu} addNodeHandler={this.addNodeHandler}\r\n\t\t\t\t\tonAddNodeSubmit={this.onAddNodeSubmit} addNodeDefaultHandler={this.addNodeDefaultHandler}\r\n\t\t\t\t\tonEditCollectionSubmit={this.onEditCollectionSubmit}\r\n\t\t\t\t/>);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(journeyElements.length > 0)\r\n\t\t{\r\n\t\t\tjourneys =\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className={\"header-container\"}>\r\n\t\t\t\t\t\t<h2>Journeys</h2>\r\n\t\t\t\t\t\t<Button value={\"+\"} id={\"manual-add\"} style={{alignSelf: \"end\"}} onClick={(e) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.openModal(e, <AddEditCollectionModal onCollectionSubmit={this.onAddCollectionSubmit}/>);\r\n\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{journeyElements}\r\n\t\t\t\t</>;\r\n\t\t}\r\n\t\tif(cognateElements.length > 0)\r\n\t\t{\r\n\t\t\tcognates =\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className={\"header-container\"}>\r\n\t\t\t\t\t\t<h2>Cognates</h2>\r\n\t\t\t\t\t\t<Button value={\"+\"} id={\"manual-add\"} style={{alignSelf: \"end\"}} onClick={(e) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.openModal(e, <AddEditCollectionModal onCollectionSubmit={this.onAddCollectionSubmit}\r\n\t\t\t\t\t\t\t                                          type={\"Cognates\"}/>);\r\n\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{cognateElements}\r\n\t\t\t\t</>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className={\"collections-container\"}>\r\n\t\t\t\t{journeys}\r\n\t\t\t\t{cognates}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}