{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\client\\\\src\\\\components\\\\modals\\\\LoginRegisterModal.jsx\";\nimport { Component } from \"react\";\nimport { Textbox } from \"../controls/Textbox\";\nimport { Button } from \"../controls/Button\";\nimport { LabeledControl } from \"../controls/LabeledControl\";\nimport { ColourPicker } from \"../controls/ColourPicker\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class LoginRegisterModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mode: this.props.mode,\n      // \"login\" || \"register\"\n\n      /* Login */\n      loginUsername: \"\",\n      loginPassword: \"\",\n      rememberMe: false,\n\n      /* Register */\n      displayName: \"\",\n      username: \"\",\n      password: \"\",\n      passwordConfirm: \"\",\n      email: \"\",\n      emailConfirm: \"\",\n      dataConsent: false\n    };\n    this.onFieldChange = this.onFieldChange.bind(this);\n    this.validate = this.validate.bind(this);\n  }\n\n  onFieldChange(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n  /**\r\n   * Validates form data.\r\n   * @param mode Whether to validate login or register data\r\n   * @returns {boolean}\r\n   */\n\n\n  validate(mode) {\n    let errorCollector = \"\";\n\n    if (mode === \"login\") {\n      // New user data\n      const username = this.state.loginUsername;\n      const password = this.state.loginPassword; // Client-side validation\n\n      if (username === \"\") errorCollector += \"Username missing.\\n\";\n      if (password === \"\") errorCollector += \"Password missing.\\n\";\n    } else if (mode === \"register\") {\n      const dataConsent = this.state.dataConsent;\n\n      if (!dataConsent) {\n        errorCollector += \"You must agree to the privacy policy to create a profile.\";\n      } else {\n        // New user data\n        const username = this.state.username;\n        const displayName = this.state.displayName;\n        const password = this.state.password;\n        const passwordConfirm = this.state.passwordConfirm;\n        const email = this.state.email;\n        const emailConfirm = this.state.emailConfirm; // Client-side validation\n\n        if (displayName.length < 3) errorCollector += \"Display name too short (min. 3 characters).\\n\";\n        if (displayName.length > 32) errorCollector += \"Display name too long (max. 32 characters).\\n\";\n        if (username.length < 3) errorCollector += \"Username too short (min. 3 characters).\\n\";\n        if (username.length > 32) errorCollector += \"Username too long (max. 32 characters).\\n\";\n        if (password.length < 6) errorCollector += \"Password too short (min. 6 characters).\\n\";\n        if (password !== passwordConfirm) errorCollector += \"Passwords do not match.\\n\";\n        if (/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email)) errorCollector += \"E-mail address invalid.\\n\";\n        if (email !== emailConfirm) errorCollector += \"E-mail addresses do not match.\\n\";\n      }\n    }\n\n    if (errorCollector !== \"\") {\n      alert(errorCollector); // TODO: Proper response toasts\n\n      return false;\n    } else return true;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top\",\n        children: [this.state.mode === \"login\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left login\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-register-data\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form\",\n                children: [/*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Username: \",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"loginUsername\",\n                    value: this.state.loginUsername,\n                    hint: \"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Password: \",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"loginPassword\",\n                    isPassword: true,\n                    value: this.state.loginPassword,\n                    hint: \"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Remember me:\",\n                  tooltip: \"This will set an essential cookie to keep you logged in.\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    name: \"rememberMe\",\n                    checked: this.state.rememberMe,\n                    onChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }, this), this.state.mode === \"register\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left register\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-register-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"User Data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form\",\n                children: [/*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Display name: \",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"displayName\",\n                    value: this.state.displayName,\n                    hint: \"e.g. \\\"Jordan F.\\\"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Username: \",\n                  tooltip: \"Min. 3 characters.\\nMax. 32 characters.\",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"username\",\n                    value: this.state.username,\n                    hint: \"e.g. \\\"JordanFinch72\\\"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Password: \",\n                  tooltip: \"Min. 6 characters\",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"password\",\n                    isPassword: true,\n                    value: this.state.password,\n                    hint: \"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"Password (confirm): \",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"passwordConfirm\",\n                    isPassword: true,\n                    value: this.state.passwordConfirm,\n                    hint: \"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"E-mail address: \",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"email\",\n                    value: this.state.email,\n                    hint: \"e.g. \\\"lema@jordanfinch.dev\\\"\",\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(LabeledControl, {\n                  label: \"E-mail address (confirm): \",\n                  children: /*#__PURE__*/_jsxDEV(Textbox, {\n                    name: \"emailConfirm\",\n                    value: this.state.emailConfirm,\n                    onFieldChange: this.onFieldChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Legal Stuff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"By ticking this box, you agree that your user data will be used in accordance with the \", /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"#\",\n                    target: \"_blank\",\n                    children: \"privacy policy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 101\n                  }, this), \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  name: \"dataConsent\",\n                  checked: this.state.dataConsent,\n                  onChange: this.onFieldChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons-container\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            value: \"Submit\",\n            id: \"add-collection-modal-submit\",\n            onClick: e => {\n              if (this.validate(this.state.mode)) {\n                this.props.handler(e, this.state);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/client/src/components/modals/LoginRegisterModal.jsx"],"names":["Component","Textbox","Button","LabeledControl","ColourPicker","LoginRegisterModal","constructor","props","state","mode","loginUsername","loginPassword","rememberMe","displayName","username","password","passwordConfirm","email","emailConfirm","dataConsent","onFieldChange","bind","validate","event","target","name","value","type","checked","setState","errorCollector","length","test","alert","render","e","handler"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\r\nimport {Textbox} from \"../controls/Textbox\";\r\nimport {Button} from \"../controls/Button\";\r\nimport {LabeledControl} from \"../controls/LabeledControl\";\r\nimport {ColourPicker} from \"../controls/ColourPicker\";\r\n\r\nexport class LoginRegisterModal extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmode: this.props.mode, // \"login\" || \"register\"\r\n\r\n\t\t\t/* Login */\r\n\t\t\tloginUsername: \"\",\r\n\t\t\tloginPassword: \"\",\r\n\t\t\trememberMe: false,\r\n\r\n\t\t\t/* Register */\r\n\t\t\tdisplayName: \"\",\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tpasswordConfirm: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\temailConfirm: \"\",\r\n\t\t\tdataConsent: false\r\n\t\t};\r\n\r\n\t\tthis.onFieldChange = this.onFieldChange.bind(this);\r\n\t\tthis.validate = this.validate.bind(this);\r\n\t}\r\n\r\n\tonFieldChange(event)\r\n\t{\r\n\t\tconst target = event.target;\r\n\t\tconst name = target.name;\r\n\t\tconst value = (target.type === \"checkbox\") ? target.checked : target.value;\r\n\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Validates form data.\r\n\t * @param mode Whether to validate login or register data\r\n\t * @returns {boolean}\r\n\t */\r\n\tvalidate(mode)\r\n\t{\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(mode === \"login\")\r\n\t\t{\r\n\t\t\t// New user data\r\n\t\t\tconst username = this.state.loginUsername;\r\n\t\t\tconst password = this.state.loginPassword;\r\n\r\n\t\t\t// Client-side validation\r\n\t\t\tif(username === \"\")\r\n\t\t\t\terrorCollector += \"Username missing.\\n\";\r\n\t\t\tif(password === \"\")\r\n\t\t\t\terrorCollector += \"Password missing.\\n\";\r\n\t\t}\r\n\t\telse if(mode === \"register\")\r\n\t\t{\r\n\t\t\tconst dataConsent = this.state.dataConsent;\r\n\t\t\tif(!dataConsent)\r\n\t\t\t{\r\n\t\t\t\terrorCollector += \"You must agree to the privacy policy to create a profile.\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// New user data\r\n\t\t\t\tconst username = this.state.username;\r\n\t\t\t\tconst displayName = this.state.displayName;\r\n\t\t\t\tconst password = this.state.password;\r\n\t\t\t\tconst passwordConfirm = this.state.passwordConfirm;\r\n\t\t\t\tconst email = this.state.email;\r\n\t\t\t\tconst emailConfirm = this.state.emailConfirm;\r\n\r\n\t\t\t\t// Client-side validation\r\n\t\t\t\tif(displayName.length < 3)\r\n\t\t\t\t\terrorCollector += \"Display name too short (min. 3 characters).\\n\";\r\n\t\t\t\tif(displayName.length > 32)\r\n\t\t\t\t\terrorCollector += \"Display name too long (max. 32 characters).\\n\";\r\n\t\t\t\tif(username.length < 3)\r\n\t\t\t\t\terrorCollector += \"Username too short (min. 3 characters).\\n\";\r\n\t\t\t\tif(username.length > 32)\r\n\t\t\t\t\terrorCollector += \"Username too long (max. 32 characters).\\n\";\r\n\t\t\t\tif(password.length < 6)\r\n\t\t\t\t\terrorCollector += \"Password too short (min. 6 characters).\\n\";\r\n\t\t\t\tif(password !== passwordConfirm)\r\n\t\t\t\t\terrorCollector += \"Passwords do not match.\\n\";\r\n\t\t\t\tif(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email))\r\n\t\t\t\t\terrorCollector += \"E-mail address invalid.\\n\";\r\n\t\t\t\tif(email !== emailConfirm)\r\n\t\t\t\t\terrorCollector += \"E-mail addresses do not match.\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(errorCollector !== \"\")\r\n\t\t{\r\n\t\t\talert(errorCollector); // TODO: Proper response toasts\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse return true;\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className={\"modal\"}>\r\n\t\t\t\t<div className={\"top\"}>\r\n\t\t\t\t\t{this.state.mode === \"login\" &&\r\n\t\t\t\t\t\t<div className={\"left login\"}>\r\n\t\t\t\t\t\t\t<h2>Login</h2>\r\n\t\t\t\t\t\t\t<div className={\"login-register-data\"}>\r\n\t\t\t\t\t\t\t\t<div className={\"section\"}>\r\n\t\t\t\t\t\t\t\t\t<div className={\"form\"}>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Username: \"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"loginUsername\"} value={this.state.loginUsername} hint={\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Password: \"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"loginPassword\"} isPassword={true} value={this.state.loginPassword} hint={\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Remember me:\"} tooltip={\"This will set an essential cookie to keep you logged in.\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type={\"checkbox\"} name={\"rememberMe\"} checked={this.state.rememberMe} onChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{this.state.mode === \"register\" &&\r\n\t\t\t\t\t\t<div className={\"left register\"}>\r\n\t\t\t\t\t\t\t<h2>Register</h2>\r\n\t\t\t\t\t\t\t<div className={\"login-register-data\"}>\r\n\t\t\t\t\t\t\t\t<div className={\"section\"}>\r\n\t\t\t\t\t\t\t\t\t<h4>User Data</h4>\r\n\t\t\t\t\t\t\t\t\t<div className={\"form\"}>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Display name: \"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"displayName\"} value={this.state.displayName} hint={\"e.g. \\\"Jordan F.\\\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Username: \"} tooltip={\"Min. 3 characters.\\nMax. 32 characters.\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"username\"} value={this.state.username} hint={\"e.g. \\\"JordanFinch72\\\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Password: \"} tooltip={\"Min. 6 characters\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"password\"} isPassword={true} value={this.state.password} hint={\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"Password (confirm): \"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"passwordConfirm\"} isPassword={true} value={this.state.passwordConfirm} hint={\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"E-mail address: \"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"email\"} value={this.state.email} hint={\"e.g. \\\"lema@jordanfinch.dev\\\"\"} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledControl label={\"E-mail address (confirm): \"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Textbox name={\"emailConfirm\"} value={this.state.emailConfirm} onFieldChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t\t</LabeledControl>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={\"section\"}>\r\n\t\t\t\t\t\t\t\t\t<h4>Legal Stuff</h4>\r\n\t\t\t\t\t\t\t\t\t<div className={\"form\"}>\r\n\t\t\t\t\t\t\t\t\t\t<p>By ticking this box, you agree that your user data will be used in accordance with the <a href={\"#\"} target={\"_blank\"}>privacy policy</a>.</p>\r\n\t\t\t\t\t\t\t\t\t\t<input type={\"checkbox\"} name={\"dataConsent\"} checked={this.state.dataConsent} onChange={this.onFieldChange} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={\"bottom\"}>\r\n\t\t\t\t\t<div className={\"buttons-container\"}>\r\n\t\t\t\t\t\t<Button value={\"Submit\"} id={\"add-collection-modal-submit\"} onClick={(e) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(this.validate(this.state.mode))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.handler(e, this.state);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}