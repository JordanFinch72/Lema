{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\COMP3000_LEMA\\\\Project\\\\lema\\\\src\\\\components\\\\Collections.jsx\";\nimport { Component } from \"react\";\nimport { Collection } from \"./Collection\";\nimport { Button } from \"./Button\";\nimport { AddEditCollectionModal } from \"./AddEditCollectionModal\";\nimport { AddEditNodeModal } from \"./AddEditNodeModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class Collections extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n    /* Click, event handlers */\n\n    this.addCollection = this.addCollection.bind(this);\n    this.editCollection = this.editCollection.bind(this);\n    this.addNode = this.addNode.bind(this);\n    this.editNode = this.editNode.bind(this);\n    this.editNodeColour = this.editNodeColour.bind(this);\n    this.removeNode = this.removeNode.bind(this);\n    this.cAddNode = this.cAddNode.bind(this);\n    this.cAddNodeDefault = this.cAddNodeDefault.bind(this);\n    this.cRemoveCollection = this.cRemoveCollection.bind(this);\n    /* Prop functions */\n\n    this.openModal = this.props.openModal.bind(this);\n    this.closeModal = this.props.closeModal.bind(this);\n    this.openContextMenu = this.props.openContextMenu.bind(this);\n    this.closeContextMenu = this.props.closeContextMenu.bind(this);\n  }\n\n  editNodeColour(e, node) {\n    // TODO: Open modal, allow user choice\n    let newValue = \"red\"; // Find node and set colour\n\n    let newItems = this.state.items;\n\n    for (let i = 0; i < newItems.length; ++i) {\n      for (let j = 0; j < newItems[i].childNodes.length; ++j) {\n        let childNode = newItems[i].childNodes[j];\n\n        if (childNode === node) {\n          newItems[i].childNodes[j].colour = newValue;\n        }\n      }\n    }\n\n    this.setState({\n      items: newItems\n    });\n  }\n\n  removeNode(e, parentIndex, childIndex) {\n    let newItems = this.state.items;\n    delete newItems[parentIndex].childNodes[childIndex];\n    this.setState({\n      items: newItems\n    }, function () {\n      console.log(this.state);\n    });\n  }\n\n  addCollection(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error handling with toast\n    else {\n      this.setState(prevState => ({\n        items: [...prevState.items, {\n          type: data.type,\n          header: data.header,\n          childNodes: []\n        }]\n      }), this.closeModal);\n    }\n  }\n\n  editCollection(e, data) {\n    if (data.type === \"Cognates\") data.type = \"cognate\";else if (data.type === \"Historical journey\") data.type = \"journey\"; // Data validation\n\n    let errorCollector = \"\";\n    if (data.header.word === null || data.header.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.header.language === null || data.header.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    let newItems = this.state.items;\n    newItems[data.index].type = data.type;\n    newItems[data.index].header = data.header;\n    this.setState({\n      items: newItems\n    }, this.closeModal);\n  }\n  /* Context menu item handlers */\n\n\n  cAddNode(e, parentIndex) {\n    // Open the AddEditNodeModal\n    this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditNodeModal, {\n      onNodeSubmit: this.addNode,\n      parentIndex: parentIndex\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }, this));\n  }\n\n  cAddNodeDefault(e, parentIndex) {\n    this.addNode(e, {\n      word: \"word\",\n      language: \"language\",\n      parentIndex: parentIndex\n    });\n  }\n\n  cRemoveCollection(e, index) {\n    let newItems = this.state.items;\n    delete newItems[index];\n    this.setState({\n      items: newItems\n    });\n  }\n\n  addNode(e, data) {\n    // Data validation\n    let errorCollector = \"\";\n    if (data.word === null || data.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.language === null || data.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error message with toast\n    else {\n      // Create new child node\n      let newChildNode = {\n        word: data.word,\n        language: data.language\n      };\n      let newItems = this.state.items;\n      newItems[data.parentIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.items array)\n\n      this.setState({\n        items: newItems\n      }, this.closeModal);\n    }\n  }\n\n  editNode(e, data) {\n    // Data validation\n    let errorCollector = \"\";\n    if (data.word === null || data.word.length <= 0) errorCollector += \"You must enter a word.\\n\";\n    if (data.language === null || data.language.length <= 0) errorCollector += \"You must enter a language.\\n\";\n    if (errorCollector.length > 0) alert(errorCollector); // TODO: Proper error message with toast\n    else {\n      // Create new child node\n      let newChildNode = {\n        word: data.word,\n        language: data.language\n      };\n      let newItems = this.state.items;\n      newItems[data.parentIndex].childNodes[data.childIndex] = {\n        word: data.word,\n        language: data.language\n      };\n      this.setState({\n        items: newItems\n      }, this.closeModal);\n    }\n  }\n\n  render() {\n    let journeys = null,\n        cognates = null;\n    let journeyElements = [],\n        cognateElements = [];\n    this.state.items.map((item, index) => {\n      if (typeof item !== \"undefined\") {\n        let component = /*#__PURE__*/_jsxDEV(Collection, {\n          index: index,\n          type: item.type,\n          header: item.header,\n          openModal: this.openModal,\n          childNodes: item.childNodes,\n          editCollection: this.editCollection,\n          openContextMenu: this.openContextMenu,\n          closeContextMenu: this.closeContextMenu,\n          cAddNode: this.cAddNode,\n          cAddNodeDefault: this.cAddNodeDefault,\n          cRemoveCollection: this.cRemoveCollection,\n          addNode: this.addNode,\n          editNode: this.editNode,\n          removeNode: this.removeNode,\n          editNodeColour: this.editNodeColour\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this);\n\n        if (item.type === \"journey\") journeyElements.push(component);else if (item.type === \"cognate\") cognateElements.push(component);\n      }\n    });\n\n    if (journeyElements.length > 0) {\n      journeys = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Journeys\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            value: \"+\",\n            id: \"manual-add\",\n            style: {\n              alignSelf: \"end\"\n            },\n            onClick: e => {\n              this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n                onCollectionSubmit: this.addCollection\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 28\n              }, this));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 6\n        }, this), journeyElements]\n      }, void 0, true);\n    }\n\n    if (cognateElements.length > 0) {\n      cognates = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Cognates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            value: \"+\",\n            id: \"manual-add\",\n            style: {\n              alignSelf: \"end\"\n            },\n            onClick: e => {\n              this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n                onCollectionSubmit: this.addCollection,\n                type: \"cognate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 28\n              }, this));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 6\n        }, this), cognateElements]\n      }, void 0, true);\n    }\n\n    if (journeyElements.length <= 0 && cognateElements.length <= 0) // Default just say \"Collections\"; re-using journeys variable\n      {\n        journeys = /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Collections\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              value: \"+\",\n              id: \"manual-add\",\n              style: {\n                alignSelf: \"end\"\n              },\n              onClick: e => {\n                this.openModal(e, /*#__PURE__*/_jsxDEV(AddEditCollectionModal, {\n                  onCollectionSubmit: this.addCollection\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 34\n                }, this));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 6\n          }, this)\n        }, void 0, false);\n      }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"collections-container\",\n      children: [journeys, cognates]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/xampp/htdocs/COMP3000_LEMA/Project/lema/src/components/Collections.jsx"],"names":["Component","Collection","Button","AddEditCollectionModal","AddEditNodeModal","Collections","constructor","props","state","items","addCollection","bind","editCollection","addNode","editNode","editNodeColour","removeNode","cAddNode","cAddNodeDefault","cRemoveCollection","openModal","closeModal","openContextMenu","closeContextMenu","e","node","newValue","newItems","i","length","j","childNodes","childNode","colour","setState","parentIndex","childIndex","console","log","data","type","errorCollector","header","word","language","alert","prevState","index","newChildNode","push","render","journeys","cognates","journeyElements","cognateElements","map","item","component","alignSelf"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\r\nimport {Collection} from \"./Collection\";\r\nimport {Button} from \"./Button\";\r\nimport {AddEditCollectionModal} from \"./AddEditCollectionModal\";\r\nimport {AddEditNodeModal} from \"./AddEditNodeModal\";\r\n\r\nexport class Collections extends Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\titems: this.props.items\r\n\t\t};\r\n\r\n\t\t/* Click, event handlers */\r\n\t\tthis.addCollection = this.addCollection.bind(this);\r\n\t\tthis.editCollection = this.editCollection.bind(this);\r\n\t\tthis.addNode = this.addNode.bind(this);\r\n\t\tthis.editNode = this.editNode.bind(this);\r\n\t\tthis.editNodeColour = this.editNodeColour.bind(this);\r\n\t\tthis.removeNode = this.removeNode.bind(this);\r\n\t\tthis.cAddNode = this.cAddNode.bind(this);\r\n\t\tthis.cAddNodeDefault = this.cAddNodeDefault.bind(this);\r\n\t\tthis.cRemoveCollection = this.cRemoveCollection.bind(this);\r\n\r\n\t\t/* Prop functions */\r\n\t\tthis.openModal = this.props.openModal.bind(this);\r\n\t\tthis.closeModal = this.props.closeModal.bind(this);\r\n\t\tthis.openContextMenu = this.props.openContextMenu.bind(this);\r\n\t\tthis.closeContextMenu = this.props.closeContextMenu.bind(this);\r\n\t}\r\n\r\n\teditNodeColour(e, node)\r\n\t{\r\n\t\t// TODO: Open modal, allow user choice\r\n\t\tlet newValue = \"red\";\r\n\r\n\t\t// Find node and set colour\r\n\t\tlet newItems = this.state.items;\r\n\t\tfor(let i = 0; i < newItems.length; ++i)\r\n\t\t{\r\n\t\t\tfor(let j = 0; j < newItems[i].childNodes.length; ++j)\r\n\t\t\t{\r\n\t\t\t\tlet childNode = newItems[i].childNodes[j];\r\n\t\t\t\tif(childNode === node)\r\n\t\t\t\t{\r\n\t\t\t\t\tnewItems[i].childNodes[j].colour = newValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({items: newItems});\r\n\t}\r\n\tremoveNode(e, parentIndex, childIndex)\r\n\t{\r\n\t\tlet newItems = this.state.items;\r\n\t\tdelete newItems[parentIndex].childNodes[childIndex];\r\n\t\tthis.setState({items: newItems}, function()\r\n\t\t{\r\n\t\t\tconsole.log(this.state);\r\n\t\t});\r\n\t}\r\n\r\n\taddCollection(e, data)\r\n\t{\r\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\r\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\r\n\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.header.word === null || data.header.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.header.language === null || data.header.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tif(errorCollector.length > 0)\r\n\t\t\talert(errorCollector); // TODO: Proper error handling with toast\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\titems: [\r\n\t\t\t\t\t...prevState.items,\r\n\t\t\t\t\t{type: data.type, header: data.header, childNodes: []}\r\n\t\t\t\t]\r\n\t\t\t}), this.closeModal);\r\n\t\t}\r\n\t}\r\n\teditCollection(e, data)\r\n\t{\r\n\t\tif(data.type === \"Cognates\") data.type = \"cognate\";\r\n\t\telse if(data.type === \"Historical journey\") data.type = \"journey\";\r\n\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.header.word === null || data.header.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.header.language === null || data.header.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tlet newItems = this.state.items;\r\n\t\tnewItems[data.index].type = data.type;\r\n\t\tnewItems[data.index].header = data.header;\r\n\t\tthis.setState({items: newItems}, this.closeModal);\r\n\t}\r\n\r\n\t/* Context menu item handlers */\r\n\tcAddNode(e, parentIndex)\r\n\t{\r\n\t\t// Open the AddEditNodeModal\r\n\t\tthis.openModal(e, <AddEditNodeModal onNodeSubmit={this.addNode} parentIndex={parentIndex}/>);\r\n\t}\r\n\tcAddNodeDefault(e, parentIndex)\r\n\t{\r\n\t\tthis.addNode(e, {word: \"word\", language: \"language\", parentIndex: parentIndex});\r\n\t}\r\n\tcRemoveCollection(e, index)\r\n\t{\r\n\t\tlet newItems = this.state.items;\r\n\t\tdelete newItems[index];\r\n\t\tthis.setState({items: newItems});\r\n\t}\r\n\taddNode(e, data)\r\n\t{\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.word === null || data.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.language === null || data.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tif(errorCollector.length > 0)\r\n\t\t\talert(errorCollector); // TODO: Proper error message with toast\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Create new child node\r\n\t\t\tlet newChildNode = {word: data.word, language: data.language};\r\n\t\t\tlet newItems = this.state.items;\r\n\t\t\tnewItems[data.parentIndex].childNodes.push(newChildNode); // Data contains parent Journey component's index (its location in this.state.items array)\r\n\r\n\t\t\tthis.setState({items: newItems}, this.closeModal);\r\n\t\t}\r\n\t}\r\n\teditNode(e, data)\r\n\t{\r\n\t\t// Data validation\r\n\t\tlet errorCollector = \"\";\r\n\t\tif(data.word === null || data.word.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a word.\\n\";\r\n\t\tif(data.language === null || data.language.length <= 0)\r\n\t\t\terrorCollector += \"You must enter a language.\\n\";\r\n\r\n\t\tif(errorCollector.length > 0)\r\n\t\t\talert(errorCollector); // TODO: Proper error message with toast\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Create new child node\r\n\t\t\tlet newChildNode = {word: data.word, language: data.language};\r\n\t\t\tlet newItems = this.state.items;\r\n\t\t\tnewItems[data.parentIndex].childNodes[data.childIndex] = {word: data.word, language: data.language};\r\n\r\n\t\t\tthis.setState({items: newItems}, this.closeModal);\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tlet journeys = null, cognates = null;\r\n\t\tlet journeyElements = [], cognateElements = [];\r\n\t\tthis.state.items.map((item, index) =>\r\n\t\t{\r\n\t\t\tif(typeof item !== \"undefined\")\r\n\t\t\t{\r\n\t\t\t\tlet component = <Collection\r\n\t\t\t\t\tkey={index} index={index} type={item.type} header={item.header} openModal={this.openModal}\r\n\t\t\t\t\tchildNodes={item.childNodes} editCollection={this.editCollection}\r\n\t\t\t\t\topenContextMenu={this.openContextMenu} closeContextMenu={this.closeContextMenu}\r\n\t\t\t\t\tcAddNode={this.cAddNode} cAddNodeDefault={this.cAddNodeDefault} cRemoveCollection={this.cRemoveCollection}\r\n\t\t\t\t\taddNode={this.addNode} editNode={this.editNode} removeNode={this.removeNode} editNodeColour={this.editNodeColour}\r\n\t\t\t\t/>;\r\n\t\t\t\tif(item.type === \"journey\")\r\n\t\t\t\t\tjourneyElements.push(component);\r\n\t\t\t\telse if(item.type === \"cognate\")\r\n\t\t\t\t\tcognateElements.push(component);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(journeyElements.length > 0)\r\n\t\t{\r\n\t\t\tjourneys =\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className={\"header-container\"}>\r\n\t\t\t\t\t\t<h2>Journeys</h2>\r\n\t\t\t\t\t\t<Button value={\"+\"} id={\"manual-add\"} style={{alignSelf: \"end\"}}\r\n\t\t\t\t\t\t        onClick={(e) => {\r\n\t\t\t\t\t\t\t\t\tthis.openModal(e, <AddEditCollectionModal onCollectionSubmit={this.addCollection}/>);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{journeyElements}\r\n\t\t\t\t</>;\r\n\t\t}\r\n\t\tif(cognateElements.length > 0)\r\n\t\t{\r\n\t\t\tcognates =\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className={\"header-container\"}>\r\n\t\t\t\t\t\t<h2>Cognates</h2>\r\n\t\t\t\t\t\t<Button value={\"+\"} id={\"manual-add\"} style={{alignSelf: \"end\"}}\r\n\t\t\t\t\t\t        onClick={(e) => {\r\n\t\t\t\t\t\t\t\t\tthis.openModal(e, <AddEditCollectionModal onCollectionSubmit={this.addCollection} type={\"cognate\"}/>);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{cognateElements}\r\n\t\t\t\t</>;\r\n\t\t}\r\n\t\tif(journeyElements.length <= 0 && cognateElements.length <= 0) // Default just say \"Collections\"; re-using journeys variable\r\n\t\t{\r\n\t\t\tjourneys =\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className={\"header-container\"}>\r\n\t\t\t\t\t\t<h2>Collections</h2>\r\n\t\t\t\t\t\t<Button value={\"+\"} id={\"manual-add\"} style={{alignSelf: \"end\"}}\r\n\t\t\t\t\t\t        onClick={(e) => {\r\n\t\t\t\t\t\t\t        this.openModal(e, <AddEditCollectionModal onCollectionSubmit={this.addCollection}/>);\r\n\t\t\t\t\t\t        }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className={\"collections-container\"}>\r\n\t\t\t\t{journeys}\r\n\t\t\t\t{cognates}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}